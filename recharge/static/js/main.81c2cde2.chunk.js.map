{"version":3,"sources":["service/index.js","components/GlobalContext/index.js","components/Card/index.js","components/Loading/index.js","components/Input/index.js","components/MaskLoading/index.js","components/Modal/index.js","components/index.js","utils/elementToPageTop.js","utils/addZero.js","utils/asyncComponent.js","utils/basicURL.js","utils/parseQuery.js","utils/toast.js","utils/axios.js","utils/returnTxCache.js","utils/index.js","Router.js","App.js","index.js"],"names":["requestWrapper","request","a","Promise","resolve","reject","res","data","JSON","parse","getBalance","address","window","demos","exchange","info","getPMR","pmr","recharge","invite","contract","amount","submit","orders","page","limit","order","returnRecharge","id","rawtx","repent","getGains","gains","getFundsPool","funds","getLevel","state","GlobalContext","React","createContext","connect","formatter","Component","forwardRef","props","ref","Consumer","updateStore","rest","store","Object","assign","Card","children","className","Loading","Input","value","placeholder","onClick","onChange","e","showKeyboard","multiple","then","domNode","document","getElementById","ReactDOM","createPortal","Modal","visible","onOk","elementToPageTop","number","String","replace","importComponent","component","default","this","setState","C","imgSrc","process","formatQuery","params","obj","constructor","toString","match","query","key","slice","getQuery","location","search","split","length","queryObjs","forEach","item","axios","create","baseURL","timeout","msg","duration","isNaN","m","createElement","innerHTML","style","cssText","body","appendChild","setTimeout","webkitTransition","opacity","removeChild","d","getRecords","records","localStorage","recordsJson","get","set","tx","stringify","remove","Home","asyncComponent","Records","ReferralCode","Pool","RechargeRecords","exact","path","to","timer","getPrice","level","n_a","BigNumber","times","Number","plus","App","initial","useState","saveState","useCallback","newState","prev","useSetState","balance","btcLight","genesis","status","stop","surplus","PMR","levelApply","rechargePrice","blackHole","code","maxbtc","updateLevel","ret","apply","getLevelCtrl","clearTimeout","getIdentity","Pa","btclight","option","blackhold","Pb","all","r1","r2","useEffect","currency","toast","getAddress","Provider","Router","html","getElementsByTagName","resize","fontSize","Math","min","clientWidth","addEventListener","initHtmlFontSize","render"],"mappings":"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","file":"static/js/main.81c2cde2.chunk.js","sourcesContent":["// import {axios} from '../utils'\n\nasync function requestWrapper(request) {\n    return new Promise(async (resolve, reject) => {\n        try{\n            var res = await request;\n            resolve({data: JSON.parse(res)});\n        }catch (e) {\n            reject(e);\n        }\n    });\n}\n\n/** 获取余额 **/\nexport const getBalance = (address) => {\n    // return axios.get(`/api/addr/${address}`)\n    return requestWrapper(window.demos.exchange.info(address));\n};\n\n/** 获取PMR **/\nexport const getPMR = () => {\n    return requestWrapper(window.demos.exchange.pmr());\n};\n\n/** 兑换 **/\nexport const recharge = (address, invite, contract, amount) => {\n    // return axios.post(`/api/addr/${address}/recharge/v2`, {addr, rawtx});\n    return requestWrapper(window.demos.exchange.submit(address, invite, contract, amount));\n};\n\n/** 兑换记录 **/\nexport const orders = ({address, page = 1, limit = 1000000}) => {\n    // return axios.get(`/api/addr/${address}/orders?page=${page}&limit=${limit}`)\n    return requestWrapper(window.demos.exchange.order(address, page, limit));\n};\n\n/** 回退 **/\nexport const returnRecharge = (address, id, rawtx) => {\n    // return axios.post(`/api/addr/${address}/repent`, {id, rawtx});\n    return requestWrapper(window.demos.exchange.repent(address, id, rawtx));\n};\n\n/** 收益记录 **/\nexport const getGains = ({address, page = 1, limit = 1000000}) => {\n    // return axios.get(`/api/addr/${address}/gains?page=${page}&limit=${limit}`)\n    return requestWrapper(window.demos.exchange.gains(address, page, limit));\n};\n\n/** 基金池 **/\nexport const getFundsPool = () => {\n    // return axios.get('/api/funds');\n    return requestWrapper(window.demos.exchange.funds());\n};\n\n/** 层级 **/\nexport const getLevel = () => {\n    // return axios.get('/api/state');\n    return requestWrapper(window.demos.exchange.state());\n};\n","import React, { forwardRef } from \"react\";\nconst GlobalContext = React.createContext(null);\nconst connect = formatter => {\n  return Component => {\n    return forwardRef((props, ref) => (\n      <GlobalContext.Consumer>\n        {({ updateStore, ...rest }) => {\n          let store = Object.assign({}, rest);\n          if (typeof formatter === \"function\") {\n            store = formatter(store);\n          }\n          return (\n            <Component\n              {...props}\n              {...store}\n              updateStore={updateStore}\n              ref={ref}\n            />\n          );\n        }}\n      </GlobalContext.Consumer>\n    ));\n  };\n};\n\nexport { GlobalContext, connect };\n","import React from \"react\";\nimport './style.scss';\n\nexport default function Card ({children, className = ''}) {\n  return (\n      <div className={`c-card ${className}`}>\n        {children}\n        <i />\n      </div>\n  );\n}\n","import React from \"react\";\nimport './style.scss';\n\nexport default function Loading () {\n  return (\n      <div className={`c-loading`}>\n        Loading...\n      </div>\n  );\n}\n","import React from \"react\";\n// import './style.scss';\n\nimport {elementToPageTop, toast} from \"../../utils\";\n\n// let instances = {};\n// let lastActive;\n\n// document.body.addEventListener('click', function (e) {\n//     let target = e.target;\n//     if (lastActive && instances[lastActive.id] && !instances[target.id]) {\n//         window.demos.hideKeyboard();\n//     }\n//     lastActive = target;\n// });\n\nexport default function Input (props) {\n    const {value = '', placeholder = '', onClick, onChange, id, ...rest} = props;\n    // instances[id] = 1;\n\n    // function scroll(h, t) {\n    //     let offset = document.querySelector('.footer').offsetHeight;\n    //     let gap = 2;\n    //     let innerH = window.innerHeight;\n    //     document.querySelector('.main').scrollTo({top: t + h + offset + gap - innerH });\n    // }\n\n    function handleFocus(e) {\n        onClick && onClick(e);\n        window.demos.showKeyboard({\n            value: value,\n            placeholder: placeholder,\n            multiple: true\n        }).then(function (data){\n            onChange(data)\n        })\n\n        // let h = e.target.offsetHeight;\n        // let t = elementToPageTop(e.target);\n        //\n        // setTimeout(function () {\n        //     scroll(h, t);\n        // }, 400);\n    }\n\n    return (\n        <input\n            id={id}\n            value={value}\n            placeholder={placeholder}\n            onClick={handleFocus}\n            onChange={onChange}\n            {...rest}\n        />\n    );\n}\n","import React from \"react\";\nimport ReactDOM from 'react-dom';\nimport './style.scss';\n\n// let domNode = document.body;\nlet domNode = document.getElementById('root');\n\nexport default function Loading () {\n\n    return ReactDOM.createPortal(\n        <div className={`c-mask-loading`}>\n            <div className='c-mask-loading-card'>\n                <div className='c-mask-loading-spin' />\n            </div>\n        </div>,\n        domNode\n    );\n\n}\n","import React from \"react\";\nimport './style.scss';\n\nexport default function Modal ({children, className = '', visible, onOk}) {\n    const handleOk = () => {\n        onOk && onOk();\n    };\n\n    return visible ? (\n        <div className='c-modal-mask'>\n            <div className='c-modal-content'>\n                <div className='c-modal-body'>\n                    {children}\n                </div>\n                <div className='c-modal-footer' onClick={handleOk}>确 定</div>\n            </div>\n        </div>\n    ) : null\n}\n","export { GlobalContext, connect } from \"./GlobalContext\";\nexport {default as Card} from \"./Card\";\nexport {default as Loading} from \"./Loading\";\nexport {default as Input} from \"./Input\";\nexport {default as MaskLoading} from \"./MaskLoading\";\nexport {default as Modal} from \"./Modal\";\n","function elementToPageTop(el) {\n    return el.offsetParent ? elementToPageTop(el.offsetParent) + el.offsetTop : el.offsetTop\n}\n\nexport default elementToPageTop\n","export default number => String(number).replace(/^(?=(\\d))\\1$/, '0$1')","import React from \"react\";\n\nexport default importComponent => {\n    class AsyncComponent extends React.Component {\n        constructor(props) {\n            super(props);\n\n            this.state = {\n                component: null\n            };\n        }\n\n        async componentDidMount() {\n            const { default: component } = await importComponent();\n\n            this.setState({\n                component: component\n            });\n        }\n\n        render() {\n            const C = this.state.component;\n\n            return C ? < C {...this.props }\n            /> : null;\n        }\n    }\n\n    return AsyncComponent;\n};","export default {\n    imgSrc: `${process.env.PUBLIC_URL}/images`\n};\n","function isObject(obj) {\n    if (obj === 0) return false;\n    return (\n        obj &&\n        obj.constructor &&\n        obj.constructor.toString().match(/function\\s*([^(]*)/)[1] === \"Object\"\n    );\n}\n\n/**\n *\n * @param {Object} params\n */\nfunction formatQuery(params) {\n    if (!isObject(params)) return \"\";\n\n    let query = \"\";\n    for (const key in params) {\n        query += `${key}=${params[key]}&`;\n    }\n    return query.slice(0, -1);\n}\n\n/**\n * @des 获取query参数\n */\n\nfunction getQuery(key) {\n    let query = window.location.search.slice(1);\n    query = query.split(\"&\");\n\n    if (query.length === 0) return null;\n    const queryObjs = {};\n\n    query.forEach(item => {\n        const [key, value] = item.split(\"=\");\n        queryObjs[key] = value;\n    });\n\n    if (!key) return queryObjs;\n    return queryObjs[key] || null;\n}\n\nexport default { formatQuery, getQuery };","export default function (msg, duration){\n  duration = isNaN(duration) ? 3000 : duration;\n  const m = document.createElement('div');\n  m.innerHTML = msg;\n  m.style.cssText=\"max-width:80%;min-width: 80px;padding: 10px 14px;word-break: break-all;line-height:1.5;color: rgb(255, 255, 255);text-align: center;border-radius: 4px;position: fixed;top: 50%;left: 50%;transform: translate(-50%, -50%);z-index: 999999;background: rgba(0, 0, 0,.7);font-size: 16px;\";\n  document.body.appendChild(m);\n  setTimeout(function() {\n    const d = 0.5;\n    m.style.webkitTransition = '-webkit-transform ' + d + 's ease-in, opacity ' + d + 's ease-in';\n    m.style.opacity = '0';\n    setTimeout(function() { document.body.removeChild(m) }, d * 1000);\n  }, duration);\n};\n","import axios from 'axios'\n// import {getAuth} from \"./auth\";\n// import {message} from \"antd\";\n// import history from \"../history\";\nconst instance = axios.create({\n  // baseURL: 'https://dapp.doschain.org/cracy/',\n  // baseURL: process.env.NODE_ENV === 'production' ? 'https://dapp.doschain.org/recharge' : '/recharge',\n  // baseURL: 'https://games-testnet.doschain.org/recharge',\n  baseURL: '/recharge',\n  timeout: 10000,\n});\n\n// 拦截器\n// instance.interceptors.response.use((response) => {\n//   if (response.data && response.data.errCode === \"1\") {\n//     const msg = response.data.errMsg;\n//     msg && message.error(msg);\n//     history.push('/login');\n//   }\n//   return response\n// }, (error) => {\n//   return Promise.reject(error)\n// });\n//\n// instance.interceptors.request.use((config) => {\n//   if (config.data && config.method === 'post') {\n//     config.headers['Content-Type'] = 'application/x-www-form-urlencoded';\n//     let ret = '';\n//     for (let it in config.data) {\n//       ret += encodeURIComponent(it) + '=' + encodeURIComponent(config.data[it]) + '&'\n//     }\n//     config.data = ret.substring(0, ret.length - 1);\n//   }\n//\n//   const token = getAuth();\n//   if (token) {\n//     if (config.method === 'get') {\n//       config.params = Object.assign(config.params || {}, {token});\n//     } else if (config.method === 'post'){\n//       config.data = `${config.data ? `${config.data}&` : ''}token=${token}`\n//     }\n//   }\n//\n//   return config\n// }, (error) => {\n//   return Promise.reject(error)\n// });\n\nexport default instance\n","function getRecords(address) {\n    let records = localStorage[`rechargeReturn_${address}`];\n    let recordsJson = {};\n    if (records) {\n        try {\n            recordsJson = JSON.parse(records);\n        } catch (e) {}\n    }\n\n    return recordsJson\n}\n\nexport default {\n    get: function (address, id) {\n        let recordsJson = getRecords(address);\n        return recordsJson[id] || '';\n    },\n    set: function (address, id, tx) {\n        let recordsJson = getRecords(address);\n        recordsJson[id] = tx;\n        localStorage[`rechargeReturn_${address}`] = JSON.stringify(recordsJson);\n    },\n    remove: function (address, id) {\n        let recordsJson = getRecords(address);\n        delete recordsJson[id];\n        localStorage[`rechargeReturn_${address}`] = JSON.stringify(recordsJson);\n    }\n}\n","export { default as className } from \"./className\";\nexport { default as elementToPageTop } from \"./elementToPageTop\";\nexport { default as addZero } from \"./addZero\";\nexport { default as asyncComponent } from \"./asyncComponent\";\nexport { default as basicURL } from \"./basicURL\";\nexport { default as parseQuery } from \"./parseQuery\";\nexport { default as axios } from \"./axios\";\nexport { default as toast } from \"./toast\";\nexport { default as returnTxCache } from \"./returnTxCache\";\n","import React from \"react\";\nimport { HashRouter as Router, Route, Switch, Link } from \"react-router-dom\";\nimport { asyncComponent } from \"./utils\";\n\nconst Home = asyncComponent(() => import(\"./pages/Home\"));\nconst Records = asyncComponent(() => import(\"./pages/Records\"));\nconst ReferralCode = asyncComponent(() => import(\"./pages/ReferralCode\"));\nconst Pool = asyncComponent(() => import(\"./pages/Pool\"));\nconst RechargeRecords = asyncComponent(() => import(\"./pages/RechargeRecords\"));\n\nexport default function ({children}) {\n    return (\n        <Router>\n            <div className='wrapper'>\n                <div className='main'>\n                    <Switch>\n                        <Route exact path=\"/\" component={Home} />\n                        <Route exact path=\"/records\" component={Records} />\n                        <Route exact path=\"/referral-code\" component={ReferralCode} />\n                        <Route exact path=\"/pool\" component={Pool} />\n                        <Route exact path=\"/recharge-records\" component={RechargeRecords} />\n                    </Switch>\n                </div>\n                <div className='footer'>\n                    <nav className='nav-bar'>\n                        <Link to='/'>首页</Link>\n                        <i />\n                        <Link to='recharge-records'>兑换记录</Link>\n                        <i />\n                        <Link to='/records'>收益记录</Link>\n                        <i />\n                        <Link to='/referral-code'>我的推广码</Link>\n                        <i />\n                        <Link to='pool'>资金池</Link>\n                    </nav>\n                </div>\n            </div>\n        </Router>\n    )\n};\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { GlobalContext } from \"./components\";\nimport Router from \"./Router\";\nimport \"./css/global.scss\";\nimport {getBalance, getPMR, getLevel} from \"./service\";\nimport BigNumber from \"bignumber.js\"\nimport {toast} from \"./utils\"\nlet timer = null;\nlet useSetState = (initial = {}) => {\n    const [state, saveState] = useState(initial)\n    const setState = useCallback((newState) => {\n      saveState(prev => ({...prev, ...newState}))\n    }, [])\n\n    return [state, setState]\n  }\nlet getPrice = (level) => {\n    let n_a = new BigNumber(1e-5);\n    let n_b = new BigNumber(1e-7);\n    return n_b.times(Number(level)).plus(n_a).toString();\n}\nfunction App() {\n    const [state, setState] = useSetState({\n        address: '', // 账户地址\n        balance: 0, // 余额\n        btcLight: '', // 合约地址\n        genesis: '', // 创世账号地址\n        status: 1, // 状态\n        stop: 0, // 停盘额度\n        surplus: 0, // 剩余额度\n        PMR: '--',\n        level: '--', // 层数\n        levelApply: 0, // 层数已兑换dos\n        rechargePrice: 0, // 兑换价格\n        blackHole: '', // 兑换价格\n        code: '', // 邀请码\n        maxbtc: 0, // 单次最大可使用BTC\n    });\n\n    const updateStore = newState => {\n        setState(newState);\n    };\n\n    const updateLevel = () => {\n        getLevel().then(({data}) => {\n            if (data.ret) {\n                const {apply, level, pmr, status, stop, surplus} = data.data;\n                updateStore({\n                    levelApply: apply,\n                    level,\n                    PMR: pmr,\n                    status,\n                    stop,\n                    surplus,\n                    rechargePrice: getPrice(level),\n                })\n                status === 0 && getLevelCtrl();\n            } else {\n                getLevelCtrl();\n            }\n        }, getLevelCtrl)\n    }\n\n    const getLevelCtrl = () => {\n        clearTimeout(timer);\n        timer = setTimeout(() => {updateLevel()}, 2000)\n    }\n\n    useEffect( () => {\n        function addr() {\n            return new Promise(function (resolve) {\n                setTimeout(function () {\n                    // resolve({address: 'TcS8a787PfU8b754FeqWHbQFSykGUDpY4Uu'})\n                    resolve({address: 'TcASfmyoFiNobNaCHeiPMkWgGmovoxk1sqk', currency: 'DOS'})\n                }, 100)\n            })\n        }\n        async function getAddress () {\n            let {address, currency} = process.env.NODE_ENV === 'production'\n                ? await window.demos.getIdentity()\n                : await window.demos.getIdentity();\n                // : await addr();\n\n            if(currency === 'DOS') {\n                updateStore({address});\n                getIdentity(address);\n            } else {\n                toast('请切换到DOS钱包再试', 60000)\n            }\n        }\n\n        getAddress();\n    }, []);\n\n    function getIdentity (address) {\n        let Pa = new Promise(function (resolve) {\n            getBalance(address).then(({data}) => {\n                if (data.ret) {\n                    let {balance, btclight, genesis, status, stop, surplus, option, blackhold, code, maxbtc} = data.data;\n                    let level = option.split(',')[0] - 0;\n                    let levelApply = option.split(',')[1] - 0;\n                    resolve({\n                        address,\n                        balance,\n                        btcLight: btclight,\n                        genesis,\n                        status,\n                        stop,\n                        surplus,\n                        blackHole: blackhold,\n                        level,\n                        levelApply,\n                        rechargePrice: getPrice(level),\n                        code,\n                        maxbtc: maxbtc ? maxbtc * 1e-8 : 0\n                    })\n                }\n            });\n        });\n\n        let Pb = new Promise(function (resolve) {\n            getPMR().then(({data}) => {\n                if (data.ret) {\n                    resolve({PMR: data.data})\n                } else {\n                    resolve({})\n                }\n            }, function () {\n                resolve({})\n            })\n        });\n\n        Promise.all([Pa, Pb]).then(function ([r1, r2]) {\n            updateStore({...r1, ...r2});\n            r1.status === 0 && getLevelCtrl()\n        });\n    }\n\n    return (\n        <GlobalContext.Provider value={{ ...state, updateStore, getIdentity}}>\n            <Router />\n        </GlobalContext.Provider>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/global.scss';\nimport App from './App';\n\nconst initHtmlFontSize = () => {\n    const html = document.getElementsByTagName('html')[0];\n    const resize = () => {\n        html.style.fontSize = Math.min(document.body.clientWidth / 11.25, 66.6) + 'px';\n    };\n    window.addEventListener('resize', resize, false);\n    resize();\n};\ninitHtmlFontSize();\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}