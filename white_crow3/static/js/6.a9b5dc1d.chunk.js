(this.webpackJsonputxo=this.webpackJsonputxo||[]).push([[6],{225:function(e,t,n){"use strict";n.d(t,"g",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return s}));var a="http://proxy-mainnet.doschain.org/insight";"games.doschain.org"!==window.location.host&&(a="http://35.220.198.141:8087");var c=function(e){return window.demos.request({method:"GET",url:"".concat(a,"/v1/api/user/").concat(e)})},r=function(e,t){return window.demos.request({method:"POST",url:"".concat(a,"/v1/api/user/").concat(e,"/bind"),data:{code:t}})},o=function(e,t){return window.demos.request({method:"POST",url:"".concat(a,"/v1/api/user/").concat(e,"/active"),data:{rawtx:t}})},i=function(e){var t=e.addr,n=e.type,c=void 0===n?0:n;return window.demos.request({method:"GET",url:"".concat(a,"/v1/api/matrix/").concat(t,"/").concat(c)})},u=function(e){var t=e.id,n=e.addr,c=e.type,r=e.rawtx;return window.demos.request({method:"POST",url:"".concat(a,"/v1/api/matrix/").concat(n,"/").concat(c,"/").concat(t,"/pay"),data:{rawtx:r}})},l=function(e){var t=e.addr,n=e.type,c=e.id;return window.demos.request({method:"GET",url:"".concat(a,"/v1/api/matrix/").concat(t,"/").concat(n,"/").concat(c)})},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return window.demos.request({method:"GET",url:"".concat(a,"/v1/api/matrix/").concat(e,"/").concat(t,"/").concat(n,"/orders?page=").concat(c,"&limit=").concat(r)})}},235:function(e,t,n){},261:function(e,t,n){"use strict";n.r(t);var a=n(5),c=n.n(a),r=n(15),o=n(12),i=n(0),u=n.n(i),l=(n(235),n(56)),s=n(18),d=n(225),m=n(236),f=n.n(m),p=null;t.default=Object(l.h)()((function(e){var t,n,a=e.address,m=e.t,h=e.history,v=s.d.getQuery("invite")||"",b=Object(i.useState)(""),E=Object(o.a)(b,2),w=E[0],O=E[1],j=Object(i.useState)(null),x=Object(o.a)(j,2),g=x[0],y=x[1],_=Object(i.useState)(null),k=Object(o.a)(_,2),S=k[0],C=k[1],N=Object(i.useState)(!1),q=Object(o.a)(N,2),T=q[0],D=q[1],G=Object(i.useState)(!1),I=Object(o.a)(G,2),J=I[0],P=I[1],R=Object(i.useState)(!1),B=Object(o.a)(R,2),Q=B[0],X=B[1],A=Object(i.useState)(!1),F=Object(o.a)(A,2),H=F[0],L=F[1],U=Object(i.useState)(v),W=Object(o.a)(U,2),z=W[0],K=W[1],M=Object(i.useState)(""),V=Object(o.a)(M,2),Y=V[0],Z=V[1];function $(e){var t=window.location;return"".concat(t.origin).concat(t.pathname,"?orientation=portrait&invite=").concat(e)}function ee(){D(!1)}function te(){var e=document.getElementById("home-banner"),t=document.body.clientWidth,n=e.clientHeight-t/750*705;y(n+"px")}function ne(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(r.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.toDataURL($(t),{width:350,margin:0});case 3:n=e.sent,O(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ce(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&L(!0),Object(d.g)(a).then(function(){var t=Object(r.a)(c.a.mark((function t(n){var r,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&L(!1),200!==n.code){t.next=11;break}return C(n.data),r=n.data.user,o=n.data.state,r.hash&&0===r.state?(Z(r.hash),re(r.hash),X(!0)):X(!1),1===r.state&&(window.sessionStorage["white_crow_".concat(a)]=JSON.stringify({price:o.price,address:o.address,qoute:o.qoute})),t.next=9,ne(r.code);case 9:t.next=12;break;case 11:1001===n.code?P(!0):Object(s.e)(n.code);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){console.warn(t),e&&L(!1)}))}function re(e){if(e)try{var t=function(){var n=Object(r.a)(c.a.mark((function n(){var a,r;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.demos.dosdata.expand.transaction(e);case 2:a=n.sent,(r=a.confirmations)&&r>=1?(Z(""),ce(!1)):(clearTimeout(p),p=setTimeout(t,2e3));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();clearTimeout(p),p=setTimeout(t,2e3)}catch(n){console.error(n)}}function oe(){return(oe=Object(r.a)(c.a.mark((function e(){var t,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=2*S.state.price,L(!0),e.prev=2,e.next=5,window.demos.balance("dos");case 5:n=e.sent,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:if(L(!1),n&&!(1e8*n<t)){e.next=14;break}return Object(s.e)(1010),e.abrupt("return");case 14:return e.next=16,window.demos.contractRaw("send",S.state.qoute,[{type:"address",value:S.state.address},{type:"uint256",value:t}]).catch((function(e){Object(s.f)(e.toString())}));case 16:if(r=e.sent){e.next=20;break}return Object(s.f)(m("active_failed")),e.abrupt("return");case 20:return L(!0),e.next=23,Object(d.a)(a,r).then((function(e){L(!1),200===e.code?(Object(s.f)(m("active_success")),Z(e.data),re(e.data),X(!0)):Object(s.e)(e.code)}),(function(){L(!1),Object(s.f)(m("active_failed"))}));case 23:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){setTimeout(te),a&&ce()}),[a]),u.a.createElement("div",{className:"p-home"},u.a.createElement(l.d,null),u.a.createElement("div",{className:"home-wrapper"},null!==g&&u.a.createElement("div",{className:"home-banner-polyfill",style:{top:g}}),u.a.createElement("div",{className:"home-banner",id:"home-banner"},u.a.createElement("p",null,m("white_crow"))),S&&u.a.createElement(l.a,null,u.a.createElement("ul",{className:"home-info clearFloat"},u.a.createElement("li",null,u.a.createElement("strong",null,S.state.num),u.a.createElement("p",null,m("home_info1"))),u.a.createElement("li",null,u.a.createElement("strong",null,"+",S.state.num24h),u.a.createElement("p",null,m("home_info2"))),u.a.createElement("li",null,u.a.createElement("strong",null,S.state.value/1e8),u.a.createElement("p",null,m("home_info3"))),u.a.createElement("li",null,u.a.createElement("strong",null,S.state.value24h/1e8),u.a.createElement("p",null,m("home_info4")))),u.a.createElement("div",{className:"home-info2"},u.a.createElement("div",null,u.a.createElement("p",null,S.user.value/1e8||"0.00"," DOS"),u.a.createElement("p",null,S.user.value_miss/1e8||"0.00"," DOS")),u.a.createElement("div",null,u.a.createElement("div",null,"ID ",(t=S.user.id,n=6,(Array(n).join("0")+t).slice(-n))),u.a.createElement("div",null,S.user.num)),u.a.createElement("div",null,u.a.createElement("strong",null,"X3"),u.a.createElement("span",null,S.user.value3x/1e8||"0.00"," DOS")),u.a.createElement("div",null,u.a.createElement("strong",null,"X4"),u.a.createElement("span",null,S.user.value4x/1e8||"0.00"," DOS")))),S&&u.a.createElement("div",{className:"home-bottom"},u.a.createElement("button",{onClick:function(){D(!0)}},m("share")),u.a.createElement("div",null),0===S.user.state?u.a.createElement("button",{onClick:Y?function(){X(!0)}:function(){return oe.apply(this,arguments)}},m("active")):1===S.user.state?u.a.createElement("button",{onClick:function(){h.push("/matrix")}},m("buy")):u.a.createElement("button",{disabled:!0},m("user_disabled")))),S&&u.a.createElement(l.f,{visible:T,onCancel:ee,className:"home-qrCode-modal"},u.a.createElement("p",{className:"p1"},m("affiliate_link")),u.a.createElement("div",{className:"home-qrCode"},w&&u.a.createElement("img",{src:w,alt:"",width:"350",height:"350"})),u.a.createElement("p",{className:"p2"},$(S.user.code)),u.a.createElement("button",{onClick:function(){try{document.getElementById("address-container").select(),document.execCommand("Copy"),Object(s.f)(m("copy_success")),ee()}catch(e){Object(s.f)(m("copy_failed"))}}},m("copy_share")),u.a.createElement("input",{type:"text",value:$(S.user.code),readOnly:!0,id:"address-container",style:{border:0,padding:0,position:"fixed",left:"-100%"},onChange:function(){}})),u.a.createElement(l.f,{visible:J,showClose:!1,className:"home-recommend-modal"},u.a.createElement("p",{className:"p1"},m("recommended_id")),u.a.createElement("div",{className:"home-input"},u.a.createElement("input",{type:"text",placeholder:m("recommended_hint"),value:z,onChange:function(e){var t=e.target.value;t.includes("invite=")&&(t=t.match(/invite=(\w+)/)[1]),K(t)}}),u.a.createElement("div",{onClick:function(){window.demos.scanQRCode().then((function(e){var t=e;e.includes("invite=")&&(t=e.match(/invite=(\w+)/)[1]),K(t)}))}})),u.a.createElement("button",{onClick:function(){if(a){var e=z.trim();e?(L(!0),Object(d.b)(a,e).then((function(e){L(!1),200===e.code?(Object(s.f)(m("bind_success")),P(!1),ce()):Object(s.e)(e.code,m)}),(function(e){Object(s.f)(m("bind_failed")),L(!1)}))):Object(s.f)(m("recommended_help"))}}},m("submit"))),u.a.createElement(l.b,{hash:Y,visible:Q,onCancel:function(){X(!1)}}),H&&u.a.createElement(l.e,null))}))}}]);