(this.webpackJsonputxo=this.webpackJsonputxo||[]).push([[5],{225:function(e,t,n){"use strict";n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return i}));n(5),n(15);var a="http://proxy-mainnet.doschain.org/insight";"games.doschain.org"!==window.location.host&&(a="http://35.220.198.141:8087");var c=function(e){return window.demos.request({method:"GET",url:"".concat(a,"/v1/api/user/").concat(e)})},r=function(e,t){return window.demos.request({method:"POST",url:"".concat(a,"/v1/api/user/").concat(e,"/bind"),data:{code:t}})},o=function(e,t){return window.demos.request({method:"POST",url:"".concat(a,"/v1/api/user/").concat(e,"/active"),data:{rawtx:t}})},l=function(e){var t=e.addr,n=e.type,c=void 0===n?0:n;return window.demos.request({method:"GET",url:"".concat(a,"/v1/api/matrix/").concat(t,"/").concat(c)})},i=function(e){var t=e.id,n=e.addr,c=e.type;return window.demos.request({method:"POST",url:"".concat(a,"/v1/api/matrix/").concat(n,"/").concat(c,"/").concat(t,"/pay")})}},233:function(e,t,n){},258:function(e,t,n){"use strict";n.r(t);var a=n(5),c=n.n(a),r=n(15),o=n(13),l=n(0),i=n.n(l),u=(n(233),n(56)),s=n(18),d=n(225),m=n(234),h=n.n(m),f=document.getElementById("root"),p=null;t.default=Object(u.h)()((function(e){var t=e.address,n=e.t,a=e.history,m=s.c.getQuery("invite")||"",b=Object(l.useState)(""),v=Object(o.a)(b,2),E=v[0],O=v[1],w=Object(l.useState)(null),j=Object(o.a)(w,2),y=j[0],g=j[1],x=Object(l.useState)(null),S=Object(o.a)(x,2),k=S[0],C=S[1],N=Object(l.useState)(!1),_=Object(o.a)(N,2),q=_[0],T=_[1],D=Object(l.useState)(!1),I=Object(o.a)(D,2),B=I[0],J=I[1],L=Object(l.useState)(!1),P=Object(o.a)(L,2),R=P[0],G=P[1],Q=Object(l.useState)(!1),X=Object(o.a)(Q,2),F=X[0],H=X[1],U=Object(l.useState)(m),W=Object(o.a)(U,2),z=W[0],A=W[1],K=Object(l.useState)(""),M=Object(o.a)(K,2),V=M[0],Y=M[1];function Z(){T(!1)}function $(){var e=document.getElementById("home-banner"),t=document.body.clientWidth,n=e.clientHeight-t/750*705;g(n+"px")}function ee(e){return te.apply(this,arguments)}function te(){return(te=Object(r.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.location,e.prev=1,e.next=4,h.a.toDataURL("".concat(n.origin,"/?orientation=portrait&invite=").concat(t),{width:350,margin:0});case 4:a=e.sent,O(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function ne(){H(!0),Object(d.e)(t).then(function(){var e=Object(r.a)(c.a.mark((function e(n){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(n),H(!1),200!==n.code){e.next=12;break}return C(n.data),a=n.data.user,r=n.data.state,a.hash&&0===a.state&&(Y(a.hash),ae(a.hash)),1===a.state&&(window.sessionStorage["white_crow_".concat(t)]=JSON.stringify({address:r.address,qoute:r.qoute,hash:a.hash})),e.next=10,ee(a.code);case 10:e.next=13;break;case 12:1001===n.code?J(!0):Object(s.d)(n.code);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){console.warn(e),H(!1)}))}function ae(e){if(e)try{var t=function(){var n=Object(r.a)(c.a.mark((function n(){var a,r;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.demos.dosdata.chain.transaction(e);case 2:a=n.sent,(r=a.confirmations)&&r>1?(clearTimeout(p),Y(""),ne()):p=setTimeout(t,2e3);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();clearTimeout(p),p=setTimeout(t,2e3)}catch(n){console.error(n)}}function ce(){return(ce=Object(r.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.demos.contractRaw("send",k.state.qoute,[{type:"address",value:k.state.address},{type:"uint256",value:2*k.state.price}]).catch((function(e){Object(s.e)(e.toString())}));case 2:if(n=e.sent){e.next=6;break}return Object(s.e)("\u6fc0\u6d3b\u5931\u8d25"),e.abrupt("return");case 6:return H(!0),e.next=9,Object(d.a)(t,n).then((function(e){console.log(e),200===e.code?(Object(s.e)("\u6fc0\u6d3b\u6210\u529f"),Y(e.data),ae(e.data)):(H(!1),Object(s.d)(e.code))}),(function(){H(!1),Object(s.e)("\u6fc0\u6d3b\u5931\u8d25")}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(l.useEffect)((function(){if(f.addEventListener("touchstart",$,!1),t)return ne(),function(){f.removeEventListener("touchstart",$)}}),[t]),i.a.createElement("div",{className:"p-home"},i.a.createElement(u.d,null),i.a.createElement("div",{className:"home-wrapper"},null!==y&&i.a.createElement("div",{className:"home-banner-polyfill",style:{top:y}}),i.a.createElement("div",{className:"home-banner",id:"home-banner"},i.a.createElement("p",null,n("white_crow"))),k&&i.a.createElement(u.a,null,i.a.createElement("ul",{className:"home-info clearFloat"},i.a.createElement("li",null,i.a.createElement("strong",null,k.state.num),i.a.createElement("p",null,n("home_info1"))),i.a.createElement("li",null,i.a.createElement("strong",null,"+",k.state.num24h),i.a.createElement("p",null,n("home_info2"))),i.a.createElement("li",null,i.a.createElement("strong",null,k.state.value),i.a.createElement("p",null,n("home_info3"))),i.a.createElement("li",null,i.a.createElement("strong",null,k.state.value24h),i.a.createElement("p",null,n("home_info4")))),i.a.createElement("div",{className:"home-info2"},i.a.createElement("div",null,k.user.value||"0.00"," DOS"),i.a.createElement("div",null,i.a.createElement("div",null,"ID ",k.user.id),i.a.createElement("div",null,k.user.num)),i.a.createElement("div",null,i.a.createElement("strong",null,"X3"),i.a.createElement("span",null,k.user.value3x||"0.00"," DOS")),i.a.createElement("div",null,i.a.createElement("strong",null,"X4"),i.a.createElement("span",null,k.user.value4x||"0.00"," DOS")))),k&&i.a.createElement("div",{className:"home-bottom"},i.a.createElement("button",{onClick:function(){T(!0)}},n("share")),i.a.createElement("div",null),0===k.user.state?i.a.createElement("button",{onClick:V?function(){G(!0)}:function(){return ce.apply(this,arguments)}},n("active")):1===k.user.state?i.a.createElement("button",{onClick:function(){a.push("/matrix")}},n("buy")):i.a.createElement("button",{disabled:!0},n("user_disabled")))),k&&i.a.createElement(u.f,{visible:q,onCancel:Z,className:"home-qrCode-modal"},i.a.createElement("p",{className:"p1"},n("affiliate_link")),i.a.createElement("div",{className:"home-qrCode"},E&&i.a.createElement("img",{src:E,alt:"",width:"350",height:"350"})),i.a.createElement("p",{className:"p2"},k.user.code),i.a.createElement("button",{onClick:function(){try{document.getElementById("address-container").select(),document.execCommand("Copy"),Object(s.e)(n("copy_success")),Z()}catch(e){Object(s.e)(n("copy_failed"))}}},n("copy_address")),i.a.createElement("input",{type:"text",value:k.user.code,readOnly:!0,id:"address-container",style:{border:0,padding:0,position:"fixed",left:"-100%"},onChange:function(){}})),i.a.createElement(u.f,{visible:B,showClose:!1,className:"home-recommend-modal"},i.a.createElement("p",{className:"p1"},n("recommended_id")),i.a.createElement("div",{className:"home-input"},i.a.createElement("input",{type:"text",placeholder:n("recommended_hint"),value:z,onChange:function(e){A(e.target.value)}}),i.a.createElement("div",{onClick:function(){window.demos.scanQRCode().then((function(e){var t=e;e.includes("invite=")&&(t=e.match(/invite=(\w+)/)[1]),A(t)}))}})),i.a.createElement("button",{onClick:function(){if(t){var e=z.trim();e?(H(!0),Object(d.b)(t,e).then((function(e){console.log(e),H(!1),200===e.code?(Object(s.e)("\u7ed1\u5b9a\u6210\u529f"),J(!1),ne()):Object(s.d)(e.code,n)}),(function(e){H(!1)}))):Object(s.e)("\u8bf7\u586b\u5199\u63a8\u8350ID")}}},n("submit"))),i.a.createElement(u.b,{hash:V,visible:R,onCancel:function(){G(!1)}}),F&&i.a.createElement(u.e,null))}))}}]);
//# sourceMappingURL=5.feb01502.chunk.js.map