(this.webpackJsonputxo=this.webpackJsonputxo||[]).push([[6],{225:function(e,t,n){"use strict";n.d(t,"g",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return s}));var a="http://proxy-mainnet.doschain.org/insight";"games.doschain.org"!==window.location.host&&(a="http://35.220.198.141:8087");var c=function(e){return window.demos.request({method:"GET",url:"".concat(a,"/v1/api/user/").concat(e)})},r=function(e,t){return window.demos.request({method:"POST",url:"".concat(a,"/v1/api/user/").concat(e,"/bind"),data:{code:t}})},o=function(e,t){return window.demos.request({method:"POST",url:"".concat(a,"/v1/api/user/").concat(e,"/active"),data:{rawtx:t}})},i=function(e){var t=e.addr,n=e.type,c=void 0===n?0:n;return window.demos.request({method:"GET",url:"".concat(a,"/v1/api/matrix/").concat(t,"/").concat(c)})},l=function(e){var t=e.id,n=e.addr,c=e.type,r=e.rawtx;return window.demos.request({method:"POST",url:"".concat(a,"/v1/api/matrix/").concat(n,"/").concat(c,"/").concat(t,"/pay"),data:{rawtx:r}})},u=function(e){var t=e.addr,n=e.type,c=e.id;return window.demos.request({method:"GET",url:"".concat(a,"/v1/api/matrix/").concat(t,"/").concat(n,"/").concat(c)})},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return window.demos.request({method:"GET",url:"".concat(a,"/v1/api/matrix/").concat(e,"/").concat(t,"/").concat(n,"/orders?page=").concat(c,"&limit=").concat(r)})}},235:function(e,t,n){},261:function(e,t,n){"use strict";n.r(t);var a=n(5),c=n.n(a),r=n(15),o=n(12),i=n(0),l=n.n(i),u=(n(235),n(56)),s=n(18),d=n(225),m=n(236),p=n.n(m),h=null;t.default=Object(u.h)()((function(e){var t=e.address,n=e.t,a=e.history,m=s.c.getQuery("invite")||"",f=Object(i.useState)(""),v=Object(o.a)(f,2),b=v[0],E=v[1],w=Object(i.useState)(null),O=Object(o.a)(w,2),j=O[0],g=O[1],x=Object(i.useState)(null),y=Object(o.a)(x,2),k=y[0],S=y[1],C=Object(i.useState)(!1),N=Object(o.a)(C,2),_=N[0],q=N[1],T=Object(i.useState)(!1),D=Object(o.a)(T,2),G=D[0],I=D[1],J=Object(i.useState)(!1),P=Object(o.a)(J,2),R=P[0],B=P[1],Q=Object(i.useState)(!1),X=Object(o.a)(Q,2),F=X[0],H=X[1],L=Object(i.useState)(m),U=Object(o.a)(L,2),W=U[0],z=U[1],A=Object(i.useState)(""),K=Object(o.a)(A,2),M=K[0],V=K[1];function Y(e){var t=window.location;return"".concat(t.origin).concat(t.pathname,"?orientation=portrait&invite=").concat(e)}function Z(){q(!1)}function $(){var e=document.getElementById("home-banner"),t=document.body.clientWidth,n=e.clientHeight-t/750*705;g(n+"px")}function ee(e){return te.apply(this,arguments)}function te(){return(te=Object(r.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.toDataURL(Y(t),{width:350,margin:0});case 3:n=e.sent,E(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ne(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&H(!0),Object(d.g)(t).then(function(){var n=Object(r.a)(c.a.mark((function n(a){var r,o;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(a),e&&H(!1),200!==a.code){n.next=12;break}return S(a.data),r=a.data.user,o=a.data.state,r.hash&&0===r.state?(V(r.hash),ae(r.hash),B(!0)):B(!1),1===r.state&&(window.sessionStorage["white_crow_".concat(t)]=JSON.stringify({price:o.price,address:o.address,qoute:o.qoute})),n.next=10,ee(r.code);case 10:n.next=13;break;case 12:1001===a.code?I(!0):Object(s.d)(a.code);case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),(function(t){console.warn(t),e&&H(!1)}))}function ae(e){if(e)try{var t=function(){var n=Object(r.a)(c.a.mark((function n(){var a,r;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.demos.dosdata.expand.transaction(e);case 2:a=n.sent,(r=a.confirmations)&&r>=1?(V(""),ne(!1)):(clearTimeout(h),h=setTimeout(t,2e3));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();clearTimeout(h),h=setTimeout(t,2e3)}catch(n){console.error(n)}}function ce(){return(ce=Object(r.a)(c.a.mark((function e(){var n,a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=2*k.state.price,H(!0),e.prev=2,e.next=5,window.demos.balance("dos");case 5:a=e.sent,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:if(H(!1),a&&!(1e8*a<n)){e.next=14;break}return Object(s.d)(1010),e.abrupt("return");case 14:return e.next=16,window.demos.contractRaw("send",k.state.qoute,[{type:"address",value:k.state.address},{type:"uint256",value:n}]).catch((function(e){Object(s.e)(e.toString())}));case 16:if(r=e.sent){e.next=20;break}return Object(s.e)("\u6fc0\u6d3b\u5931\u8d25"),e.abrupt("return");case 20:return H(!0),e.next=23,Object(d.a)(t,r).then((function(e){console.log(e),H(!1),200===e.code?(Object(s.e)("\u6fc0\u6d3b\u6210\u529f"),V(e.data),ae(e.data),B(!0)):Object(s.d)(e.code)}),(function(){H(!1),Object(s.e)("\u6fc0\u6d3b\u5931\u8d25")}));case 23:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){setTimeout($),t&&ne()}),[t]),l.a.createElement("div",{className:"p-home"},l.a.createElement(u.d,null),l.a.createElement("div",{className:"home-wrapper"},null!==j&&l.a.createElement("div",{className:"home-banner-polyfill",style:{top:j}}),l.a.createElement("div",{className:"home-banner",id:"home-banner"},l.a.createElement("p",null,n("white_crow"))),k&&l.a.createElement(u.a,null,l.a.createElement("ul",{className:"home-info clearFloat"},l.a.createElement("li",null,l.a.createElement("strong",null,k.state.num),l.a.createElement("p",null,n("home_info1"))),l.a.createElement("li",null,l.a.createElement("strong",null,"+",k.state.num24h),l.a.createElement("p",null,n("home_info2"))),l.a.createElement("li",null,l.a.createElement("strong",null,k.state.value/1e8),l.a.createElement("p",null,n("home_info3"))),l.a.createElement("li",null,l.a.createElement("strong",null,k.state.value24h/1e8),l.a.createElement("p",null,n("home_info4")))),l.a.createElement("div",{className:"home-info2"},l.a.createElement("div",null,l.a.createElement("p",null,k.user.value/1e8||"0.00"," DOS"),l.a.createElement("p",null,k.user.value_miss/1e8||"0.00"," DOS")),l.a.createElement("div",null,l.a.createElement("div",null,"ID ",k.user.id),l.a.createElement("div",null,k.user.num)),l.a.createElement("div",null,l.a.createElement("strong",null,"X3"),l.a.createElement("span",null,k.user.value3x/1e8||"0.00"," DOS")),l.a.createElement("div",null,l.a.createElement("strong",null,"X4"),l.a.createElement("span",null,k.user.value4x/1e8||"0.00"," DOS")))),k&&l.a.createElement("div",{className:"home-bottom"},l.a.createElement("button",{onClick:function(){q(!0)}},n("share")),l.a.createElement("div",null),0===k.user.state?l.a.createElement("button",{onClick:M?function(){B(!0)}:function(){return ce.apply(this,arguments)}},n("active")):1===k.user.state?l.a.createElement("button",{onClick:function(){a.push("/matrix")}},n("buy")):l.a.createElement("button",{disabled:!0},n("user_disabled")))),k&&l.a.createElement(u.f,{visible:_,onCancel:Z,className:"home-qrCode-modal"},l.a.createElement("p",{className:"p1"},n("affiliate_link")),l.a.createElement("div",{className:"home-qrCode"},b&&l.a.createElement("img",{src:b,alt:"",width:"350",height:"350"})),l.a.createElement("p",{className:"p2"},Y(k.user.code)),l.a.createElement("button",{onClick:function(){try{document.getElementById("address-container").select(),document.execCommand("Copy"),Object(s.e)(n("copy_success")),Z()}catch(e){Object(s.e)(n("copy_failed"))}}},n("copy_share")),l.a.createElement("input",{type:"text",value:Y(k.user.code),readOnly:!0,id:"address-container",style:{border:0,padding:0,position:"fixed",left:"-100%"},onChange:function(){}})),l.a.createElement(u.f,{visible:G,showClose:!1,className:"home-recommend-modal"},l.a.createElement("p",{className:"p1"},n("recommended_id")),l.a.createElement("div",{className:"home-input"},l.a.createElement("input",{type:"text",placeholder:n("recommended_hint"),value:W,onChange:function(e){var t=e.target.value;t.includes("invite=")&&(t=t.match(/invite=(\w+)/)[1]),z(t)}}),l.a.createElement("div",{onClick:function(){window.demos.scanQRCode().then((function(e){var t=e;e.includes("invite=")&&(t=e.match(/invite=(\w+)/)[1]),z(t)}))}})),l.a.createElement("button",{onClick:function(){if(t){var e=W.trim();e?(H(!0),Object(d.b)(t,e).then((function(e){console.log(e),H(!1),200===e.code?(Object(s.e)("\u7ed1\u5b9a\u6210\u529f"),I(!1),ne()):Object(s.d)(e.code,n)}),(function(e){H(!1)}))):Object(s.e)("\u8bf7\u586b\u5199\u63a8\u8350\u7801")}}},n("submit"))),l.a.createElement(u.b,{hash:M,visible:R,onCancel:function(){B(!1)}}),F&&l.a.createElement(u.e,null))}))}}]);