/*! For license information please see 4.2fd468e2.chunk.js.LICENSE.txt */
(this.webpackJsonputxo=this.webpackJsonputxo||[]).push([[4],{225:function(e,t,a){var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var c=typeof n;if("string"===c||"number"===c)e.push(n);else if(Array.isArray(n)&&n.length){var s=r.apply(null,n);s&&e.push(s)}else if("object"===c)for(var i in n)a.call(n,i)&&n[i]&&e.push(i)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},226:function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return s})),a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return l}));a(5),a(15);var n="http://proxy-mainnet.doschain.org/insight";"games.doschain.org"!==window.location.host&&(n="http://35.220.198.141:8087");var r=function(e){return window.demos.request({method:"GET",url:"".concat(n,"/v1/api/user/").concat(e)})},c=function(e,t){return window.demos.request({method:"POST",url:"".concat(n,"/v1/api/user/").concat(e,"/bind"),data:{code:t}})},s=function(e,t){return window.demos.request({method:"POST",url:"".concat(n,"/v1/api/user/").concat(e,"/active"),data:{rawtx:t}})},i=function(e){var t=e.addr,a=e.type,r=void 0===a?0:a;return window.demos.request({method:"GET",url:"".concat(n,"/v1/api/matrix/").concat(t,"/").concat(r)})},l=function(e){var t=e.id,a=e.addr,r=e.type,c=e.rawtx;return window.demos.request({method:"POST",url:"".concat(n,"/v1/api/matrix/").concat(a,"/").concat(r,"/").concat(t,"/pay"),data:{rawtx:c}})}},229:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));var n=[{id:1,No:1,status:1,children:[0,0,0],num:0,repeat:0,hash:""},{id:2,No:2,status:1,children:[0,0,0],num:0,repeat:0,hash:""},{id:3,No:3,status:1,children:[0,0,0],num:0,repeat:0,hash:""},{id:4,No:4,status:1,children:[0,0,0],num:0,repeat:0,hash:""},{id:5,No:5,status:1,children:[0,0,0],num:0,repeat:0,hash:""},{id:6,No:6,status:1,children:[0,0,0],num:0,repeat:0,hash:""},{id:7,No:7,status:1,children:[0,0,0],num:0,repeat:0,hash:""},{id:8,No:8,status:1,children:[0,0,0],num:0,repeat:0,hash:""},{id:9,No:9,status:1,children:[0,0,0],num:0,repeat:0,hash:""},{id:10,No:10,status:1,children:[0,0,0],num:0,repeat:0,hash:""},{id:11,No:11,status:1,children:[0,0,0],num:0,repeat:0,hash:""},{id:12,No:12,status:1,children:[0,0,0],num:0,repeat:0,hash:""}],r=[{id:1,No:1,status:1,children:[0,0,0,0,0,0],num:0,repeat:0,hash:""},{id:2,No:2,status:1,children:[0,0,0,0,0,0],num:0,repeat:0,hash:""},{id:3,No:3,status:1,children:[0,0,0,0,0,0],num:0,repeat:0,hash:""},{id:4,No:4,status:1,children:[0,0,0,0,0,0],num:0,repeat:0,hash:""},{id:5,No:5,status:1,children:[0,0,0,0,0,0],num:0,repeat:0,hash:""},{id:6,No:6,status:1,children:[0,0,0,0,0,0],num:0,repeat:0,hash:""},{id:7,No:7,status:1,children:[0,0,0,0,0,0],num:0,repeat:0,hash:""},{id:8,No:8,status:1,children:[0,0,0,0,0,0],num:0,repeat:0,hash:""},{id:9,No:9,status:1,children:[0,0,0,0,0,0],num:0,repeat:0,hash:""},{id:10,No:10,status:1,children:[0,0,0,0,0,0],num:0,repeat:0,hash:""},{id:11,No:11,status:1,children:[0,0,0,0,0,0],num:0,repeat:0,hash:""},{id:12,No:12,status:1,children:[0,0,0,0,0,0],num:0,repeat:0,hash:""}]},256:function(e,t,a){},257:function(e,t,a){},261:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a.n(n),c=a(40),s=a(15),i=a(12);function l(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u=a(0),o=a.n(u),d=a(225),m=a.n(d),h=a(56),p=a(18),f=a(57);a(256);function v(e){var t=e.No,a=e.num,n=e.repeat,r=e.price,c=void 0===r?0:r,s=e.status,i=void 0===s?1:s,l=e.children,u=e.className,d=e.onTap,h=void 0===d?function(){}:d;return o.a.createElement("div",{className:"x3-x4__matrix ".concat(u)},o.a.createElement("a",{className:m()(Object(f.a)({"x-button":1},"status_".concat(i),1)),onClick:h},o.a.createElement("span",{className:"No"},t),o.a.createElement("span",{className:"price"},c),o.a.createElement("span",{className:m()({cart:1,hide:2!==i})},"BUY"),o.a.createElement("i",{className:m()({lock:1,hide:1!==i})})),o.a.createElement("div",{className:"x3-children"},o.a.createElement("div",{className:m()({"x-child":1,fill:l[0]})}),o.a.createElement("div",{className:m()({"x-child":1,fill:l[1]})}),o.a.createElement("div",{className:m()({"x-child":1,fill:l[2]})})),o.a.createElement("div",{className:"x3-barnchs"},o.a.createElement("div",null,o.a.createElement("div",{className:"top"}),o.a.createElement("div",{className:"bottom"})),o.a.createElement("div",null),o.a.createElement("div",null,o.a.createElement("div",{className:"top"}),o.a.createElement("div",{className:"bottom"}))),o.a.createElement("div",{className:"x-info"},o.a.createElement("span",null,a),o.a.createElement("span",null,n)))}function N(e){var t=e.No,a=e.num,n=e.repeat,r=e.children,c=e.status,s=void 0===c?1:c,i=e.price,l=void 0===i?0:i,u=e.className,d=e.onTap,h=void 0===d?function(){}:d;return o.a.createElement("div",{className:"x3-x4__matrix ".concat(u)},o.a.createElement("div",{className:m()(Object(f.a)({"x-button":1},"status_".concat(s),1)),onClick:h},o.a.createElement("span",{className:"No"},t),o.a.createElement("span",{className:"price"},l),o.a.createElement("span",{className:m()({cart:1,hide:2!==s})},"BUY"),o.a.createElement("i",{className:m()({lock:1,hide:1!==s})})),o.a.createElement("div",{className:"x4-branchs-level1"},o.a.createElement("div",{className:"line"}),o.a.createElement("div",{className:"rect"})),o.a.createElement("div",{className:"x4-children__level1"},o.a.createElement("div",{className:m()({"x-child":1,fill:r[0]})}),o.a.createElement("div",{className:m()({"x-child":1,fill:r[1]})})),o.a.createElement("div",{className:"x4-branchs-level2"},o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null)),o.a.createElement("div",{className:"x4-children__level2"},o.a.createElement("div",{className:m()({"x-child":1,fill:r[2]})}),o.a.createElement("div",{className:m()({"x-child":1,fill:r[3]})}),o.a.createElement("div",{className:m()({"x-child":1,fill:r[4]})}),o.a.createElement("div",{className:m()({"x-child":1,fill:r[5]})})),o.a.createElement("div",{className:"x-info"},o.a.createElement("span",null,a),o.a.createElement("span",null,n)))}var E=a(229),b=a(226),x=(a(257),function(e,t){for(var a=new Array(e).fill(0),n=0;n<e;n++)a[n]=n<t?1:0;return a}),w=function(e,t){var a=l(0===e?E.a:E.b);return a=a.map((function(e,a){return e.price=t*Math.pow(2,a),e}))};t.default=Object(h.h)()((function(e){var t=Object(u.useContext)(h.c).address,a=Object(u.useState)(""),n=Object(i.a)(a,2),l=n[0],d=n[1],f=Object(u.useState)(0),E=Object(i.a)(f,2),O=E[0],j=E[1],y=Object(u.useState)(!1),k=Object(i.a)(y,2),g=k[0],_=k[1],T="",S="",A="",q=sessionStorage["white_crow_".concat(t)];q&&(q=JSON.parse(q),T=q.address,A=q.qoute,S=q.price/1e8);var C=Object(u.useState)(w(0,S)),P=Object(i.a)(C,2),X=P[0],G=P[1];Object(u.useEffect)((function(){t&&J(0)}),[t]);var J=function(){var e=Object(s.a)(r.a.mark((function e(a){var n,s,i,l,u,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.d)({addr:t,type:a});case 2:if(n=e.sent,s=n.code,i=n.data,u=(l=void 0===i?[]:i).length,o=w(a,S),200===s&&0!==u){e.next=11;break}return G(o),e.abrupt("return");case 11:if(12!==u){e.next=15;break}return o=o.map((function(e,t){return e.status=t<11?3:l[11].hash?4:3,e.children=x(0===O?3:6,l[t].index),e})),G(o),e.abrupt("return");case 15:o.forEach((function(e,t){var a=l.find((function(t){return t.id===e.id}));a?(o[t].status=a.hash?4:3,o[t]=Object(c.a)({},o[t],{},a),o[t].children=x(0===O?3:6,a.index)):(o[t].status=t===u?l[u-1].hash?4:2:1,o[t].children=x(0===O?3:6,0))})),G(o);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e){e!==O&&(J(e),j(e))},F=function(){var a=Object(s.a)(r.a.mark((function a(n){var c,s,i,l,u,o,m;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c=n.id,1!==(s=n.status)&&3!==s){a.next=3;break}return a.abrupt("return",e.history.push("/detail/".concat(c)));case 3:if(4!==s){a.next=8;break}return d(n.hash),_(!0),R(n.hash),a.abrupt("return");case 8:return a.next=10,window.demos.balance("dos");case 10:if(!(a.sent<n.price)){a.next=14;break}return Object(p.d)(1010),a.abrupt("return");case 14:return a.next=16,window.demos.contractRaw("send",A,[{type:"address",value:T},{type:"uint256",value:1e8*n.price}]).catch((function(e){console.error(e)}));case 16:if(i=a.sent,!window["".concat(n.id,"_lock")]){a.next=19;break}return a.abrupt("return");case 19:return window["".concat(n.id,"_lock")]=!0,l={addr:t,type:O,id:c,rawtx:i},a.next=23,Object(b.c)(l);case 23:u=a.sent,o=u.code,m=u.data,200===o?(d(m),_(!0),R(m)):Object(p.d)(o),window["".concat(n.id,"_lock")]=null;case 28:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),R=function(e){if(e){var t=null;try{var a=function(){var n=Object(s.a)(r.a.mark((function n(){var c,s;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.demos.dosdata.expand.transaction(e).catch((function(e){console.log("err",e)}));case 2:c=n.sent,(s=c.confirmations)&&s>=1?(clearTimeout(t),_(!1),J(O)):t=setTimeout(a,2e3);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();clearTimeout(t),t=setTimeout(a,2e3)}catch(n){console.error(n)}}};return console.log("matrixList",X),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"matrix-page"},o.a.createElement(h.g,Object.assign({title:"\u77e9\u9635\u5217\u8868"},e)),o.a.createElement("div",{className:"main"},o.a.createElement("div",{className:"tab"},o.a.createElement("button",{className:m()({active:0===O}),onClick:function(){return B(0)}},"X3"),o.a.createElement("button",{className:m()({active:1===O}),onClick:function(){return B(1)}},"X4")),o.a.createElement(h.a,{className:m()({"p-r-20 p-l-20":1==O})},o.a.createElement("div",{className:"info"},o.a.createElement("span",null,"FORSAGE"),o.a.createElement("span",null,0===O?"X3":"X4")),o.a.createElement("div",{className:"matrix-list"},X.map((function(e){return 0===O?o.a.createElement(v,Object.assign({key:e.id,className:"m-b-80 p-r-20 p-l-20",onTap:function(){return F(e)}},e)):o.a.createElement(N,Object.assign({key:e.id,className:"m-b-80",onTap:function(){return F(e)}},e))})))))),o.a.createElement(h.b,{hash:l,visible:g}))}))}}]);