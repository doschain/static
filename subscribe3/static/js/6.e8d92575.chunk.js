(this.webpackJsonpdemos_dapp=this.webpackJsonpdemos_dapp||[]).push([[6],{285:function(t,e,n){"use strict";n.d(e,"e",(function(){return c})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return i})),n.d(e,"a",(function(){return s})),n.d(e,"f",(function(){return u})),n.d(e,"g",(function(){return d}));var a="https://games.doschain.org/subscribe";function c(t){var e=t.addr,n=t.state,c=t.page,o=t.limit,r=t.category,i="".concat(a,"/v1/api/apps/").concat(e,"/").concat(n,"/?page=").concat(c,"&limit=").concat(o);return r&&(i+="&category=".concat(r)),window.demos.request({method:"GET",url:i})}function o(){return window.demos.request({method:"GET",url:"".concat(a,"/v1/api/category")})}function r(){return window.demos.request({method:"GET",url:"".concat(a,"/v1/api/state")})}function i(t){return window.demos.request({method:"GET",url:"".concat(a,"/v1/api/app/").concat(t)})}function s(t){var e=t.addr,n=t.rawtx,c=t.id,o=t.gain,r=t.code,i=t.mail;return window.demos.request({method:"POST",url:"".concat(a,"/v1/api/app/").concat(e,"/pay"),data:{rawtx:n,id:c,gain:o,code:r,mail:i}})}"games.doschain.org"!==window.location.host&&(a="http://35.220.198.141:8088");var u=function(t){return window.demos.request({method:"GET",url:"".concat(a,"/v1/api/orders/").concat(t)})},d=function(t,e){return window.demos.request({method:"GET",url:"".concat(a,"/v1/api/order/").concat(t,"/").concat(e)})}},286:function(t,e,n){"use strict";var a=n(20),c=n(0);e.a=function(t,e){var n=Object(c.useState)(t),o=Object(a.a)(n,2),r=o[0],i=o[1];return[r,function(t){clearInterval(e),i(t),e=setInterval((function(){t++,i(t)}),1e3)}]}},323:function(t,e,n){t.exports={history:"history_history__2fjli","no-data":"history_no-data__1cz1N"}},330:function(t,e,n){"use strict";n.r(e);var a=n(20),c=n(0),o=n.n(c),r=n(323),i=n.n(r),s=n(89),u=n(285),d=n(286);e.default=function(t){var e=t.history,n=Object(c.useContext)(s.d).wallet_address,r=Object(c.useState)(null),l=Object(a.a)(r,2),m=l[0],p=l[1],f=Object(c.useState)(!1),h=Object(a.a)(f,2),v=h[0],w=h[1],g=Object(d.a)(0,void 0),b=Object(a.a)(g,2),E=b[0],_=b[1];function y(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&w(!0),Object(u.f)(n).then((function(e){t&&w(!1),e.ret&&(p((e.data||[]).map((function(t){return 0===t.state?t.status=t.order_time>=0?0:1:1===t.state&&(t.status=2),t}))),clearInterval(void 0),_(e.time))}))}return Object(c.useEffect)((function(){n&&y()}),[n]),o.a.createElement(s.a,{title:"DAPP\u7533\u8d2d\u8bb0\u5f55"},v?o.a.createElement("div",{style:{height:"100vh"}},o.a.createElement(s.f,null)):o.a.createElement("div",{className:i.a.history},m&&m.length>0?m.map((function(t){var a=t.id,c=t.name,r=t.logo,i=t.price,u=t.order_time,d=t.status;return o.a.createElement(s.c,{onCD:y,now:E,key:a,id:a,name:c,logo:r,price:i,time:u,status:d,onClick:function(a){e.push("/history_detail/".concat(a)),window.sessionStorage["dapp_".concat(n,"_").concat(a)]=JSON.stringify(t)}})})):o.a.createElement("div",{className:i.a["no-data"]},o.a.createElement("img",{src:"".concat("https://cdn.jsdelivr.net/gh/doschain/static/subscribe3","/images/no_data.png"),alt:""}),o.a.createElement("p",null,"\u6682\u65e0\u6570\u636e"))))}}}]);