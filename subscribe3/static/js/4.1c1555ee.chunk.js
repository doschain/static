(this.webpackJsonpdemos_dapp=this.webpackJsonpdemos_dapp||[]).push([[4],{285:function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"f",(function(){return u})),a.d(t,"g",(function(){return d}));var n="http://proxy-mainnet.doschain.org/subscribe";function r(e){var t=e.addr,a=e.state,r=e.page,c=e.limit,o=e.category,i="".concat(n,"/v1/api/apps/").concat(t,"/").concat(a,"/?page=").concat(r,"&limit=").concat(c);return o&&(i+="&category=".concat(o)),window.demos.request({method:"GET",url:i})}function c(){return window.demos.request({method:"GET",url:"".concat(n,"/v1/api/category")})}function o(){return window.demos.request({method:"GET",url:"".concat(n,"/v1/api/state")})}function i(e){return window.demos.request({method:"GET",url:"".concat(n,"/v1/api/app/").concat(e)})}function s(e){var t=e.addr,a=e.rawtx,r=e.id,c=e.gain,o=e.code,i=e.mail;return window.demos.request({method:"POST",url:"".concat(n,"/v1/api/app/").concat(t,"/pay"),data:{rawtx:a,id:r,gain:c,code:o,mail:i}})}"games.doschain.org"!==window.location.host&&(n="http://35.220.198.141:8088");var u=function(e){return window.demos.request({method:"GET",url:"".concat(n,"/v1/api/orders/").concat(e)})},d=function(e,t){return window.demos.request({method:"GET",url:"".concat(n,"/v1/api/order/").concat(e,"/").concat(t)})}},286:function(e,t,a){"use strict";var n=a(20),r=a(0);t.a=function(e,t){var a=Object(r.useState)(e),c=Object(n.a)(a,2),o=c[0],i=c[1];return[o,function(e){clearInterval(t),i(e),t=setInterval((function(){e++,i(e)}),1e3)}]}},289:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return s}));a(12),a(60),a(95),a(96),a(98),a(97),a(0);var n={imgSrc:"".concat("https://cdn.jsdelivr.net/gh/doschain/static/subscribe3","/images")},r=(a(287),a(288)),c=a.n(r),o=a(291),i=a.n(o).a.create({baseURL:"/v1/api/",timeout:1e4});i.interceptors.response.use((function(e){if(e){var t=e.status,a=e.data,n=a.ret,r=a.data,o=void 0===r?null:r;if(200===parseInt(t)){var i={success:n,data:o};return i.success||c.a.fail(i.data,1.5),i}}else c.a.fail("\u8bf7\u6c42\u51fa\u9519",1.5)}),(function(e){return Promise.reject(e)})),i.interceptors.request.use((function(e){if(e.data&&"post"===e.method){e.headers["Content-Type"]="application/x-www-form-urlencoded";var t="";for(var a in e.data)t+=encodeURIComponent(a)+"="+encodeURIComponent(e.data[a])+"&";e.data=t.substring(0,t.length-1)}return e}),(function(e){return Promise.reject(e)}));a(20);var s=function(e){if(!e)return"";var t=e.length;return"".concat(e.substr(0,10),"...").concat(e.substr(t-10,t))}},319:function(e,t,a){e.exports={home:"home_home__3lina","home-title":"home_home-title__3DRdN","home-tab":"home_home-tab__fwBi0","home-tab__container":"home_home-tab__container__cts_r","home-tab__container-button":"home_home-tab__container-button__1pJcS",leftButton:"home_leftButton__2r89s",active:"home_active__24_TE",rightButton:"home_rightButton__2cofC",unActive:"home_unActive__R7YBJ","home-tab__container-tag":"home_home-tab__container-tag__1YD1_","home-dapp":"home_home-dapp__3cnl7","home-dapp__developing":"home_home-dapp__developing__3bRYP","home-dapp__list":"home_home-dapp__list__2AV6S","home-dapp__card":"home_home-dapp__card__eeGZW","home-dapp__card-logo":"home_home-dapp__card-logo__8xUUz","home-dapp__card-info":"home_home-dapp__card-info__22UEW","dapp-name":"home_dapp-name__2l-ag","dapp-price":"home_dapp-price__3chBD","home-dapp__card-countDown":"home_home-dapp__card-countDown__pGBi_",btnContainer:"home_btnContainer__1I0i_",dsb:"home_dsb__1PRwr","no-data":"home_no-data__1MTmR","go-history":"home_go-history__2zGtU"}},327:function(e,t,a){"use strict";a.r(t);var n=a(12),r=a.n(n),c=a(326),o=a(9),i=a(60),s=a(20),u=a(90),d=a(0),m=a.n(d),l=a(126),p=a(55),_=a.n(p),h=a(289),f=a(285),b=a(89),v=a(319),g=a.n(v),E=a(286),w=a(320),j=a.n(w);j.a.locale("zh-cn");var O=function(e){var t=e.text,a=e.className,n=e.onTap,r=void 0===n?function(){}:n;return m.a.createElement("button",{className:a,onClick:r},t)},N=function(e){var t=e.data;return m.a.createElement("div",{className:g.a["home-dapp__developing"]},(null===t||void 0===t?void 0:t.name)?m.a.createElement(d.Fragment,null,m.a.createElement("p",null,"\u5f53\u524d\u5f00\u53d1\u4efb\u52a1: ".concat(t.name)),m.a.createElement("p",null,"\u9884\u8ba1\u5b8c\u6210\uff1a".concat(j()(1e3*t.time).format("YYYY/MM/DD")))):m.a.createElement("p",{style:{marginTop:"0.18rem"}},"\u6682\u65e0\u5f00\u53d1\u4e2dDapp"))},y=function(e){var t=e.data,a=void 0===t?{}:t,n=e.history,r=e.curTab,c=e.updateDappInfo,o=(e.i,a.id),i=a.name,s=a.logo,d=a.price,p=a.order_time,h=a.state,f=a.now;return m.a.createElement("div",{className:g.a["home-dapp__card"]},0===r&&1===h&&m.a.createElement("div",{className:g.a["home-dapp__card-countDown"]},m.a.createElement(b.b,{time:p,now:f,cdEndCallback:function(){return c(o)}})),m.a.createElement(l.b,{to:"/dapp_detail/".concat(o,"/?tab=").concat(r)},m.a.createElement("img",{className:g.a["home-dapp__card-logo"],src:s}),m.a.createElement("div",{className:g.a["home-dapp__card-info"]},m.a.createElement("span",{className:g.a["dapp-name"]},i),m.a.createElement("span",{className:g.a["dapp-price"]},"".concat(d," DOS")))),m.a.createElement("div",{className:g.a.btnContainer},m.a.createElement("button",{className:_()(Object(u.a)({},g.a.dsb,1===r)),disabled:1===r,onClick:function(){n.push("/dapp_buy/".concat(o))}},"\u7acb\u5373\u7533\u8d2d")))},x=function(e){var t=e.loading,a=e.list,n=e.curTab,r=e.history,c=e.now,o=e.updateDappInfo;return t?m.a.createElement(b.f,null):0===a.length?m.a.createElement("div",{className:g.a["no-data"]},m.a.createElement("img",{src:"".concat(h.a.imgSrc,"/no_data.png"),alt:""}),m.a.createElement("span",null,"\u6682\u65e0\u76f8\u5173\u6570\u636e")):m.a.createElement(d.Fragment,null,a.map((function(e,t){return m.a.createElement(y,{i:t,data:e,history:r,curTab:n,now:c,key:e.id.toString(),updateDappInfo:o})})))};t.default=function(e){var t,a,n=Object(d.useContext)(b.d),p=Object(d.useState)(-1),h=Object(s.a)(p,2),v=h[0],w=h[1],j=Object(d.useState)(0),y=Object(s.a)(j,2),T=y[0],k=y[1],S=Object(d.useState)([{id:-1,name:"\u5168\u90e8"}]),D=Object(s.a)(S,2),C=D[0],I=D[1],B=Object(d.useState)(!0),G=Object(s.a)(B,2),q=G[0],R=G[1],U=Object(E.a)(0,void 0),Y=Object(s.a)(U,2),A=Y[0],P=Y[1],J=Object(d.useState)(null),z=Object(s.a)(J,2),M=z[0],F=z[1];Object(d.useEffect)((function(){K(),Q()}),[]);var W=Object(d.useState)({list:[],page:1,limit:10,total:0}),L=Object(s.a)(W,2),V=L[0],Z=L[1];Object(d.useEffect)((function(){n.wallet_address&&H({addr:n.wallet_address})}),[n.wallet_address]);var H=function(){var e=Object(i.a)(r.a.mark((function e(t){var a,i,s,u,d,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(o.a)({addr:n.wallet_address,state:0,page:1,limit:100,category:null},t),R(!0),e.next=4,Object(f.e)(a);case 4:if(i=e.sent,s=i.ret,u=i.data,d=i.time,P(d),R(!1),s&&u){e.next=12;break}return e.abrupt("return");case 12:(m={page:u.page,total:u.total,list:1===(null===t||void 0===t?void 0:t.page)?Object(c.a)(u.list):[].concat(Object(c.a)(V.list),Object(c.a)(u.list))}).list=m.list.map((function(e){return e.price=e.price/1e8,e.now=d,e})),Z(m);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(i.a)(r.a.mark((function e(){var t,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.c)();case 2:t=e.sent,a=t.ret,c=t.data,a&&F({name:c.name,time:c.time}),n.updateStore({target_address:c.address,contract:c.contract});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(i.a)(r.a.mark((function e(){var t,a,n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.b)();case 2:if(t=e.sent,a=t.ret,n=t.data,o=void 0===n?[]:n,a&&0!==o.length){e.next=8;break}return e.abrupt("return");case 8:I([].concat(Object(c.a)(C),Object(c.a)(o)));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(i.a)(r.a.mark((function e(t){var a,n,c,i,s,u,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==(a=V.list.findIndex((function(e){return e.id===t})))){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Object(f.d)(t);case 5:n=e.sent,c=n.ret,i=n.data,s=n.time,c&&(u=86400+i.order_time-s<=0,2===i.state&&u&&((d=V.list.slice()).splice(a,1),Z(Object(o.a)(Object(o.a)({},V),{},{list:d}))));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(e){k(e),w(-1),H({page:1,category:null,state:parseInt(e)})};return m.a.createElement("div",{className:g.a.home},m.a.createElement(l.b,{className:g.a["go-history"],to:"/history"},"\u7533\u8d2d\u8bb0\u5f55>"),m.a.createElement("div",{className:g.a["home-title"]}),m.a.createElement("div",{className:g.a["home-tab"]},m.a.createElement("div",{className:g.a["home-tab__container"]},m.a.createElement("div",{className:g.a["home-tab__container-button"]},m.a.createElement("button",{className:_()((t={},Object(u.a)(t,g.a.leftButton,1),Object(u.a)(t,0===T?g.a.active:g.a.unActive,1),t)),onClick:function(){return $(0)}},"\u5f85\u7533\u8d2d"),m.a.createElement("button",{className:_()((a={},Object(u.a)(a,g.a.rightButton,1),Object(u.a)(a,1===T?g.a.active:g.a.unActive,1),a)),onClick:function(){return $(1)}},"\u5df2\u7533\u8d2d")),m.a.createElement("div",{className:g.a["home-tab__container-tag"]},C.map((function(e,t){var a=e.name,n=e.id;return m.a.createElement(O,{className:_()(Object(u.a)({},g.a.active,n===v)),key:n.toString(),text:a,onTap:function(){var e;(e=n)!==v&&(w(e),H({page:1,category:-1===e?null:e}))}})}))))),m.a.createElement("div",{className:g.a["home-dapp"]},m.a.createElement(N,{data:M}),m.a.createElement("div",{className:g.a["home-dapp__list"]},m.a.createElement(x,Object.assign({},e,{curTab:T,updateDappInfo:X,loading:q,list:V.list,now:A})))))}}}]);