{"version":3,"sources":["../node_modules/react-file-reader/index.js","containers/Proposal/Edit/hooks.js","containers/Proposal/Edit/Edit.jsx","pages/Proposals/Edit.jsx","componentsv2/AttachFileButton/AttachFileButton.module.css","componentsv2/AttachFileButton/attach-file.svg","componentsv2/Files/Input.jsx","componentsv2/Files/helpers.js","componentsv2/AttachFileButton/AttachFileButton.jsx","componentsv2/ProposalForm/validation.js","componentsv2/ProposalForm/ProposalForm.jsx","componentsv2/ProposalForm/hooks.js","componentsv2/ProposalForm/index.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react2","_interopRequireDefault","__webpack_require__","_propTypes2","obj","__esModule","default","_possibleConstructorReturn","self","ReferenceError","ReactFileReader","_React$Component","_ref","_temp","_this","instance","TypeError","_classCallCheck","this","_len","args","Array","_key","__proto__","getPrototypeOf","apply","concat","fileInput","setFileInput","element","clickInput","click","handleFiles","event","base64","convertFilesToBase64","files","ef","multipleFiles","len","fileList","_loop","reader","FileReader","f","onloadend","e","push","result","readAsDataURL","_files","_reader","subClass","superClass","create","constructor","setPrototypeOf","_inherits","Component","optionalAttributes","elementId","id","createElement","className","type","onChange","accept","isArray","fileTypes","join","ref","multiple","style","width","opacity","position","disabled","onClick","children","defaultProps","propTypes","bool","func","isRequired","oneOfType","string","array","mapStateToProps","mapDispatchToProps","onEditProposal","act","withRouter","ownProps","match","_useProposal","useProposal","proposal","loading","useRedux","isPaid","usePaywall","_useIdentity","useIdentity","identityError","slicedToArray","initialValues","token","params","name","description","getMarkdownContent","filter","p","react_default","a","index_es","paddingSize","Or","kind","IdentityErrorIndicators","ProposalForm","onSubmit","PageProposalEdit","MultipleContentPage","topBannerHeight","TopBanner","PageDetails","Sidebar","Main","Fragment","headerClassName","title","Edit","module","attachFileButton","FilesInput","validMimeTypes","react_file_reader_default","formattedFiles","from","map","_ref2","idx","size","mime","includes","payload","split","pop","getFormattedFiles","inputAndNewFiles","AttachFileButton","objectWithoutProperties","classNames","styles","alt","src","attachSVG","proposalValidationSchema","_Yup$string$min$max","proposalnamesupportedchars","maxproposalnamelength","minproposalnamelength","Yup","shape","min","minLengthMessage","max","maxLengthMessage","matches","toConsumableArray","yupFieldMatcher","required","history","disableSubmit","validationSchema","policy","usePolicy","_useState","useState","_useState2","setValidationSchema","useEffect","useProposalForm","_handleSubmit","asyncToGenerator","regenerator_default","mark","_callee","values","resetForm","setSubmitting","setFieldError","proposalToken","wrap","_context","prev","next","sent","t0","stop","formik_esm","_x","_x2","handleChange","handleBlur","handleSubmit","isSubmitting","touched","setFieldValue","errors","isValid","global","toString","placeholder","onBlur","error","MarkdownEditor","v","filesInput","Input","componentsv2_AttachFileButton_AttachFileButton","layout","justify","topMarginSize","d","__webpack_exports__","componentsv2_ProposalForm_ProposalForm"],"mappings":"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","file":"static/js/PageProposalEdit.48067fc1.chunk.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar ReactFileReader = function (_React$Component) {\n  _inherits(ReactFileReader, _React$Component);\n\n  function ReactFileReader() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, ReactFileReader);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = ReactFileReader.__proto__ || Object.getPrototypeOf(ReactFileReader)).call.apply(_ref, [this].concat(args))), _this), _this.fileInput = null, _this.setFileInput = function (element) {\n      _this.fileInput = element;\n    }, _this.clickInput = function () {\n      var element = _this.fileInput;\n      element.value = '';\n      element.click();\n    }, _this.handleFiles = function (event) {\n      if (_this.props.base64) {\n        _this.convertFilesToBase64(event.target.files);\n      } else {\n        _this.props.handleFiles(event.target.files);\n      }\n    }, _this.convertFilesToBase64 = function (files) {\n      var ef = files;\n\n      if (_this.props.multipleFiles) {\n        var i, len;\n\n        (function () {\n          var files = {\n            base64: [],\n            fileList: ef\n          };\n\n          var _loop = function _loop() {\n            var reader = new FileReader();\n            var f = ef[i];\n\n            reader.onloadend = function (e) {\n              files.base64.push(reader.result);\n\n              if (files.base64.length === ef.length) {\n                _this.props.handleFiles(files);\n              }\n            };\n\n            reader.readAsDataURL(f);\n          };\n\n          for (i = 0, len = ef.length; i < len; i++) {\n            _loop();\n          }\n        })();\n      } else {\n        var _files = {\n          base64: '',\n          fileList: ef\n        };\n        var f = ef[0];\n\n        var _reader = new FileReader();\n\n        _reader.onloadend = function (e) {\n          _files.base64 = _reader.result;\n\n          _this.props.handleFiles(_files);\n        };\n\n        _reader.readAsDataURL(f);\n      }\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(ReactFileReader, [{\n    key: 'render',\n    value: function render() {\n      var hideInput = {\n        width: '0px',\n        opacity: '0',\n        position: 'fixed'\n      };\n      var optionalAttributes = {};\n\n      if (this.props.elementId) {\n        optionalAttributes.id = this.props.elementId;\n      }\n\n      return _react2.default.createElement('div', {\n        className: 'react-file-reader'\n      }, _react2.default.createElement('input', _extends({\n        type: 'file',\n        onChange: this.handleFiles,\n        accept: Array.isArray(this.props.fileTypes) ? this.props.fileTypes.join(',') : this.props.fileTypes,\n        className: 'react-file-reader-input',\n        ref: this.setFileInput,\n        multiple: this.props.multipleFiles,\n        style: hideInput,\n        disabled: this.props.disabled\n      }, optionalAttributes)), _react2.default.createElement('div', {\n        className: 'react-file-reader-button',\n        onClick: this.clickInput\n      }, this.props.children));\n    }\n  }]);\n\n  return ReactFileReader;\n}(_react2.default.Component);\n\nexports.default = ReactFileReader;\nReactFileReader.defaultProps = {\n  fileTypes: 'image/*',\n  multipleFiles: false,\n  base64: false,\n  disabled: false\n};\nReactFileReader.propTypes = {\n  multipleFiles: _propTypes2.default.bool,\n  handleFiles: _propTypes2.default.func.isRequired,\n  fileTypes: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.array]),\n  base64: _propTypes2.default.bool,\n  children: _propTypes2.default.element.isRequired,\n  disabled: _propTypes2.default.bool,\n  elementId: _propTypes2.default.string\n};","import * as act from \"src/actions\";\nimport { useRedux } from \"src/redux\";\n\nconst mapStateToProps = {};\n\nconst mapDispatchToProps = {\n  onEditProposal: act.onEditProposalV2\n};\n\nexport function useEditProposal(ownProps) {\n  const fromRedux = useRedux(ownProps, mapStateToProps, mapDispatchToProps);\n\n  return fromRedux;\n}\n","import React from \"react\";\nimport { Card, Message } from \"pi-ui\";\nimport { useProposal } from \"../Detail/hooks\";\nimport { useEditProposal } from \"./hooks\";\nimport { withRouter } from \"react-router-dom\";\nimport { getMarkdownContent } from \"src/componentsv2/Proposal/helpers\";\nimport usePaywall from \"src/hooks/usePaywall\";\nimport useIdentity from \"src/hooks/useIdentity\";\nimport Or from \"src/componentsv2/Or\";\nimport { IdentityMessageError } from \"src/componentsv2/IdentityErrorIndicators\";\nimport ProposalForm from \"src/componentsv2/ProposalForm\";\n\nconst EditProposal = ({ match }) => {\n  const { proposal, loading } = useProposal({ match });\n  const { onEditProposal } = useEditProposal();\n  const { isPaid } = usePaywall();\n  const [, identityError] = useIdentity();\n\n  const initialValues = proposal\n    ? {\n        token: match.params.token,\n        name: proposal.name,\n        description: getMarkdownContent(proposal.files),\n        files: proposal.files.filter(p => p.name !== \"index.md\")\n      }\n    : {};\n\n  return !!proposal && !loading ? (\n    <Card paddingSize=\"small\">\n      <Or>\n        {!isPaid && (\n          <Message kind=\"error\">\n            You must pay the paywall to create a proposal\n          </Message>\n        )}\n        {!!identityError && <IdentityMessageError />}\n      </Or>\n      <ProposalForm initialValues={initialValues} onSubmit={onEditProposal} />\n    </Card>\n  ) : null;\n};\n\nexport default withRouter(EditProposal);\n","import React from \"react\";\nimport MultipleContentPage from \"src/componentsv2/layout/MultipleContentPage\";\nimport ProposalEdit from \"src/containers/Proposal/Edit\";\n\nconst PageProposalEdit = () => {\n  return (\n    <MultipleContentPage topBannerHeight={90}>\n      {({ TopBanner, PageDetails, Sidebar, Main }) => (\n        <>\n          <TopBanner>\n            <PageDetails\n              headerClassName=\"no-margin-top\"\n              title=\"Edit Proposal\"\n            />\n          </TopBanner>\n          <Sidebar />\n          <Main>\n            <ProposalEdit />\n          </Main>\n        </>\n      )}\n    </MultipleContentPage>\n  );\n};\n\nexport default PageProposalEdit;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"attachFileButton\":\"AttachFileButton_attachFileButton__cuFxx\"};","module.exports = __webpack_public_path__ + \"static/media/attach-file.a5d32ac1.svg\";","import React from \"react\";\nimport ReactFileReader from \"react-file-reader\";\nimport { getFormattedFiles } from \"./helpers\";\n\nconst FilesInput = ({ value, onChange, children, validMimeTypes }) => {\n  function handleFilesChange(files) {\n    const formattedFiles = getFormattedFiles(files);\n    const inputAndNewFiles = !!value\n      ? formattedFiles.concat(value)\n      : formattedFiles;\n    // const validation = validateFiles(inputAndNewFiles, policy);\n\n    // this.setState({\n    //     policyErrors: validation.errors ? validation.errors : []\n    // });\n\n    onChange(inputAndNewFiles);\n  }\n\n  return (\n    <ReactFileReader\n      base64\n      multipleFiles\n      fileTypes={validMimeTypes}\n      handleFiles={handleFilesChange}\n    >\n      {children}\n    </ReactFileReader>\n  );\n};\n\nexport default FilesInput;\n","export function getFormattedFiles({ base64, fileList }) {\n  return Array.from(fileList).map(({ name, size, type: mime }, idx) => {\n    return {\n      name,\n      mime: name.includes(\".txt\") ? `${mime}; charset=utf-8` : mime,\n      size,\n      payload: base64[idx].split(\"base64,\").pop()\n    };\n  });\n}\n","import React from \"react\";\nimport { Button, classNames } from \"pi-ui\";\nimport styles from \"./AttachFileButton.module.css\";\nimport attachSVG from \"./attach-file.svg\";\n\nconst AttachFileButton = ({ className, ...props }) => {\n  return (\n    <Button\n      className={classNames(styles.attachFileButton, className)}\n      {...props}\n    >\n      <img alt=\"Attach\" src={attachSVG} />\n    </Button>\n  );\n};\n\nexport default AttachFileButton;\n","import * as Yup from \"yup\";\nimport {\n  yupFieldMatcher,\n  minLengthMessage,\n  maxLengthMessage\n} from \"src/utils/validation\";\n\nexport const proposalValidationSchema = ({\n  proposalnamesupportedchars,\n  maxproposalnamelength,\n  minproposalnamelength\n}) =>\n  Yup.object().shape({\n    name: Yup.string()\n      .min(\n        minproposalnamelength,\n        minLengthMessage(\"name\", minproposalnamelength)\n      )\n      .max(\n        maxproposalnamelength,\n        maxLengthMessage(\"name\", maxproposalnamelength)\n      )\n      .matches(...yupFieldMatcher(\"Name\", proposalnamesupportedchars))\n      .required(\"Required\"),\n    description: Yup.string().required(\"Required\")\n  });\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withRouter } from \"react-router-dom\";\nimport { Formik } from \"formik\";\nimport { Button, Message, BoxTextInput } from \"pi-ui\";\nimport { Row } from \"../layout\";\nimport MarkdownEditor from \"src/componentsv2/MarkdownEditor\";\nimport FilesInput from \"src/componentsv2/Files/Input\";\nimport AttachFileButton from \"src/componentsv2/AttachFileButton\";\nimport { useProposalForm } from \"./hooks\";\n\nconst ProposalForm = ({ initialValues, onSubmit, history, disableSubmit }) => {\n  const { validationSchema } = useProposalForm();\n  async function handleSubmit(\n    values,\n    { resetForm, setSubmitting, setFieldError }\n  ) {\n    try {\n      const proposalToken = await onSubmit(values);\n      setSubmitting(false);\n      history.push(`/proposal/${proposalToken}`);\n      resetForm();\n    } catch (e) {\n      setSubmitting(false);\n      setFieldError(\"global\", e);\n    }\n  }\n  return (\n    <Formik\n      initialValues={\n        initialValues || {\n          name: \"\",\n          description: \"\",\n          files: []\n        }\n      }\n      loading={!validationSchema}\n      validationSchema={validationSchema}\n      onSubmit={handleSubmit}\n    >\n      {props => {\n        const {\n          values,\n          handleChange,\n          handleBlur,\n          handleSubmit,\n          isSubmitting,\n          touched,\n          setFieldValue,\n          errors,\n          isValid\n        } = props;\n        function handleDescriptionChange(v) {\n          setFieldValue(\"description\", v);\n        }\n        function handleFilesChange(v) {\n          setFieldValue(\"files\", v);\n        }\n        return (\n          <form onSubmit={handleSubmit}>\n            {errors && errors.global && (\n              <Message kind=\"error\">{errors.global.toString()}</Message>\n            )}\n            <BoxTextInput\n              placeholder=\"Proposal name\"\n              name=\"name\"\n              value={values.name}\n              onChange={handleChange}\n              onBlur={handleBlur}\n              error={touched.name && errors.name}\n            />\n            <MarkdownEditor\n              name=\"description\"\n              className=\"margin-top-s\"\n              value={values.description}\n              onChange={handleDescriptionChange}\n              onBlur={handleBlur}\n              placeholder={\"Write your proposal\"}\n              filesInput={\n                <FilesInput value={values.files} onChange={handleFilesChange}>\n                  <AttachFileButton type=\"button\" />\n                </FilesInput>\n              }\n            />\n            <Row justify=\"right\" topMarginSize=\"s\">\n              <Button kind=\"secondary\">Save as draft</Button>\n              <Button\n                type=\"submit\"\n                kind={!isValid && disableSubmit ? \"disabled\" : \"primary\"}\n                loading={isSubmitting}\n              >\n                Submit\n              </Button>\n            </Row>\n          </form>\n        );\n      }}\n    </Formik>\n  );\n};\n\nProposalForm.propTypes = {\n  initialValues: PropTypes.object,\n  onSubmit: PropTypes.func.isRequired,\n  disableSubmit: PropTypes.bool\n};\n\nexport default withRouter(ProposalForm);\n","import { useEffect, useState } from \"react\";\nimport usePolicy from \"src/hooks/usePolicy\";\nimport { proposalValidationSchema } from \"./validation\";\n\nexport function useProposalForm() {\n  const { policy } = usePolicy();\n  const [validationSchema, setValidationSchema] = useState(\n    policy ? proposalValidationSchema(policy) : null\n  );\n\n  useEffect(\n    function handleSetValidationSchemaFromPolicy() {\n      if (!!policy && !validationSchema) {\n        setValidationSchema(proposalValidationSchema(policy));\n      }\n    },\n    [policy, validationSchema]\n  );\n\n  return { validationSchema, policy };\n}\n","export { default } from \"./ProposalForm\";\n"],"sourceRoot":""}