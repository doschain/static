(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1264:function(e,t,n){},1273:function(e,t,n){"use strict";n.r(t);var o=n(39),r=n.n(o),s=n(40),i=n(29),a=n(17),l=n(0),u=n.n(l),c=(n(1264),n(168)),p=n(287),d=n(567),h=n(60),f={IN_DISCUSSSION:"discussion",VOTING:"voting",APPROVED:"approved",REJECTED:"rejected",ABANDONED:"abandoned"},v=function(){var e,t=Object(h.a)("tab");return t&&(e=t,Object.keys(f).find(function(t){return f[t]===e}))?t:f.IN_DISCUSSSION},m=function(e,t){if(!t)return[];var n=t.pre,o=t.active,r=t.approved,s=t.rejected,i=t.abandoned;switch(e){case f.IN_DISCUSSSION:return n;case f.VOTING:return o;case f.APPROVED:return r;case f.REJECTED:return s;case f.ABANDONED:return i;default:return[]}},b=n(166),g=n(21),O=n(33),L=n(36),E=n(18),S=n(19),y=Object(g.b)(E.Vd({loggedInAsEmail:E.Zc,proposals:E.P,isLoading:Object(L.f)(E.H,E.Ac,E.mc),error:Object(L.f)(E.ve,E.B,E.G),filterValue:E.ub,emptyProposalsMessage:E.Lb,proposalsTokens:E.I}),function(e){return Object(O.b)({onFetchVettedByTokens:S.N,onFetchTokenInventory:S.H,onFetchLastBlockHeight:S.d},e)}),w=function(e,t){return u.a.createElement(d.a,Object.assign({key:t},Object(a.a)({},Object(b.g)(e,t).data,{comments:[]})))},P=function(){return u.a.createElement("div",{className:"card-placeholder"})},C=function(e){for(var t=[],n=0;n<e;n++)t.push(u.a.createElement(P,{key:"placeholder-".concat(n)}));return t},k={itemsOnLoad:0},T="increment",j="decrement";function N(e,t){switch(t.type){case T:return{itemsOnLoad:e.itemsOnLoad+t.count};case j:return{itemsOnLoad:e.itemsOnLoad-t.count};default:throw new Error}}var D=function(e){var t=e.proposals,n=e.proposalsTokens,o=e.onFetchVettedByTokens,a=e.onFetchTokenInventory,d=e.onFetchLastBlockHeight,b=e.isLoading,g=e.error,O=e.pageSize,L=Object(l.useState)(v()),E=Object(i.a)(L,2),S=E[0],y=E[1],P=Object(l.useState)(!0),D=Object(i.a)(P,2),I=D[0],M=D[1],R=Object(l.useReducer)(N,k),_=Object(i.a)(R,2),A=_[0],V=_[1],H=A.itemsOnLoad,F=function(e){return y(e)},B=m(S,n),W=function(e,t,n){return function(e,t){return e.reduce(function(e,n){var o=t.find(function(e){return e&&e.censorshiprecord&&n===e.censorshiprecord.token});return o?e.concat([o]):e},[])}(m(e,n),t)}(S,t,n),U=function(){var e=Object(s.a)(r.a.mark(function e(){var t,n,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=W.length,n=B.slice(t,t+O),M(!1),s=n.length,V({type:T,count:s}),e.next=7,o(n);case 7:V({type:j,count:s});case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();if(Object(l.useEffect)(function(){var e;e=S,Object(h.d)("tab",e)},[S]),Object(l.useEffect)(function(){var e=B&&W.length<B.length;M(e)},[B,W.length]),Object(l.useEffect)(function(){a(),d()},[d,a]),g)throw g;return u.a.createElement(u.a.Fragment,null,u.a.createElement(c.b,null,u.a.createElement(c.a,{title:"In Discusssion",count:n?n.pre.length:"",selected:f.IN_DISCUSSSION===S,onTabChange:function(){return F(f.IN_DISCUSSSION)}}),u.a.createElement(c.a,{title:"Voting",count:n?n.active.length:"",selected:f.VOTING===S,onTabChange:function(){return F(f.VOTING)}}),u.a.createElement(c.a,{title:"Approved",count:n?n.approved.length:"",selected:f.APPROVED===S,onTabChange:function(){return F(f.APPROVED)}}),u.a.createElement(c.a,{title:"Rejected",count:n?n.rejected.length:"",selected:f.REJECTED===S,onTabChange:function(){return F(f.REJECTED)}}),u.a.createElement(c.a,{title:"Abandoned",count:n?n.abandoned.length:"",selected:f.ABANDONED===S,onTabChange:function(){return F(f.ABANDONED)}})),n&&!b&&u.a.createElement(p.a,{items:W,renderItem:w,onFetchMore:U,hasMore:I,isLoading:H>0,loadingPlaceholder:C(H)}))};D.defaultProps={pageSize:4};t.default=y(D)},287:function(e,t,n){"use strict";var o=n(0),r=n.n(o),s=n(288),i=n.n(s),a=function(e){var t=e.items,n=e.initialLoad,o=e.isLoading,s=e.loadingPlaceholder,a=e.onFetchMore,l=e.hasMore,u=e.renderItem,c=e.pageStart;return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{pageStart:c,loadMore:a,initialLoad:n,hasMore:l},t.map(u)),o&&s)};a.defaultProps={initialLoad:!0,loadingPlaceholder:r.a.createElement(function(){return r.a.createElement("div",{className:"loader",key:0},"Loading ...")},null),pageStart:0},t.a=a},288:function(e,t,n){e.exports=n(289)},289:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0),s=a(r),i=a(n(25));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.scrollListener=n.scrollListener.bind(n),n.eventListenerOptions=n.eventListenerOptions.bind(n),n.mousewheelListener=n.mousewheelListener.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}},{key:"componentDidUpdate",value:function(){if(this.props.isReverse&&this.loadMore){var e=this.getParentElement(this.scrollComponent);e.scrollTop=e.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener(),this.detachMousewheelListener()}},{key:"isPassiveSupported",value:function(){var e=!1,t={get passive(){e=!0}};try{document.addEventListener("test",null,t),document.removeEventListener("test",null,t)}catch(n){}return e}},{key:"eventListenerOptions",value:function(){var e=this.props.useCapture;return this.isPassiveSupported()&&(e={useCapture:this.props.useCapture,passive:!0}),e}},{key:"setDefaultLoader",value:function(e){this.defaultLoader=e}},{key:"detachMousewheelListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}},{key:"detachScrollListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.getParentElement(this.scrollComponent)),e.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),e.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}},{key:"getParentElement",value:function(e){var t=this.props.getScrollParent&&this.props.getScrollParent();return null!=t?t:e&&e.parentNode}},{key:"filterProps",value:function(e){return e}},{key:"attachScrollListener",value:function(){var e=this.getParentElement(this.scrollComponent);if(this.props.hasMore&&e){var t=window;!1===this.props.useWindow&&(t=e),t.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),t.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),t.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}}},{key:"mousewheelListener",value:function(e){1!==e.deltaY||this.isPassiveSupported()||e.preventDefault()}},{key:"scrollListener",value:function(){var e=this.scrollComponent,t=window,n=this.getParentElement(e),o=void 0;if(this.props.useWindow){var r=document.documentElement||document.body.parentNode||document.body,s=void 0!==t.pageYOffset?t.pageYOffset:r.scrollTop;o=this.props.isReverse?s:this.calculateOffset(e,s)}else o=this.props.isReverse?n.scrollTop:e.scrollHeight-n.scrollTop-n.clientHeight;o<Number(this.props.threshold)&&e&&null!==e.offsetParent&&(this.detachScrollListener(),this.beforeScrollHeight=n.scrollHeight,this.beforeScrollTop=n.scrollTop,"function"===typeof this.props.loadMore&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}},{key:"calculateOffset",value:function(e,t){return e?this.calculateTopPosition(e)+(e.offsetHeight-t-window.innerHeight):0}},{key:"calculateTopPosition",value:function(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}},{key:"render",value:function(){var e=this,t=this.filterProps(this.props),n=t.children,o=t.element,r=t.hasMore,i=(t.initialLoad,t.isReverse),a=t.loader,l=(t.loadMore,t.pageStart,t.ref),u=(t.threshold,t.useCapture,t.useWindow,t.getScrollParent,function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(t,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","ref","threshold","useCapture","useWindow","getScrollParent"]));u.ref=function(t){e.scrollComponent=t,l&&l(t)};var c=[n];return r&&(a?i?c.unshift(a):c.push(a):this.defaultLoader&&(i?c.unshift(this.defaultLoader):c.push(this.defaultLoader))),s.default.createElement(o,u,c)}}]),t}();l.propTypes={children:i.default.node.isRequired,element:i.default.node,hasMore:i.default.bool,initialLoad:i.default.bool,isReverse:i.default.bool,loader:i.default.node,loadMore:i.default.func.isRequired,pageStart:i.default.number,ref:i.default.func,getScrollParent:i.default.func,threshold:i.default.number,useCapture:i.default.bool,useWindow:i.default.bool},l.defaultProps={element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null},t.default=l,e.exports=t.default}}]);
//# sourceMappingURL=14.b945f7e0.chunk.js.map