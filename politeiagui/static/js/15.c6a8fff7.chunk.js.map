{"version":3,"sources":["components/MultipleItemsBodyMessage.js","components/snew/SubmitPage/SubmitPageProposal.js","../node_modules/lodash/isUndefined.js","../node_modules/lodash/concat.js","components/Form/Fields/InputFieldWithError.js","components/Form/Fields/PolicyErrors.js","components/Form/Fields/FilesField.js"],"names":["MultipleItemsBodyMessage","_ref","items","Array","isArray","react_default","a","createElement","map","error","i","key","style","padding","Error","message","ToggledMarkdown","props","MarkdownEditorField","input","toggledStyle","ProposalSubmit","isLoading","PageLoadingIcon","policy","warning","onSave","onSaveProposalDraft","submitting","handleSubmit","validationError","submitError","userCanExecuteActions","openModal","proposalCredits","loggedInAsEmail","editingMode","isDraftSaving","draftButtonText","submitEnabled","className","role","main_default","id","Message","type","header","components_MultipleItemsBodyMessage","Field","name","component","ErrorField","Object","assign","title","display","width","InputFieldWithError","tabIndex","placeholder","flex","justifyContent","color","defaultValue","rows","cols","target","rel","href","PROPOSAL_GUIDELINES","fontSize","FilesField","normalize","normalizer","concat","value","onClick","ButtonWithLoadingIcon","text","MANAGE_CREDITS_MODAL","paddingTop","body","MarkdownHelp","module","exports","undefined","arrayPush","__webpack_require__","baseFlatten","copyArray","length","arguments","args","array","index","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","label","_ref$meta","meta","touched","PolicyErrors","errors","idx","_React$Component","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleFilesChange","files","_this$props","dispatch","formattedFiles","getFormattedFiles","inputAndNewFiles","validation","validateFiles","validFiles","setState","policyErrors","change","state","inherits","createClass","_this$props2","_this$props2$placehol","disabled","Fields_PolicyErrors","react_file_reader_default","base64","multipleFiles","fileTypes","validmimetypes","handleFiles","margin","maximages","Math","floor","maximagesize","join","ProposalImages","onChange","React","Component","previousValue","cloneDeep","isUndefined","remove","splice"],"mappings":"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","file":"static/js/15.c6a8fff7.chunk.js","sourcesContent":["import React from \"react\";\n\nconst MultipleItemsBodyMessage = ({ items }) =>\n  Array.isArray(items) ? (\n    <ul>\n      {items.map((error, i) => (\n        <li key={i} style={{ padding: \"3px 0px\" }}>\n          {error}\n        </li>\n      ))}\n    </ul>\n  ) : items instanceof Error ? (\n    items.message\n  ) : (\n    items\n  );\n\nexport default MultipleItemsBodyMessage;\n","import React from \"react\";\nimport ReactBody from \"react-body\";\nimport MarkdownEditorField from \"../../Form/Fields/MarkdownEditorField\";\nimport { FilesField, normalizer } from \"../../Form/Fields/FilesField\";\nimport ErrorField from \"../../Form/Fields/ErrorField\";\nimport InputFieldWithError from \"../../Form/Fields/InputFieldWithError\";\nimport Message from \"../../Message\";\nimport MultipleItemsBodyMessage from \"../../MultipleItemsBodyMessage\";\nimport ButtonWithLoadingIcon from \"../ButtonWithLoadingIcon\";\nimport { Field } from \"redux-form\";\nimport MarkdownHelp from \"../../MarkdownHelp\";\nimport { MANAGE_CREDITS_MODAL } from \"../../Modal/modalTypes\";\nimport { PROPOSAL_GUIDELINES } from \"../../../constants\";\n\nconst ToggledMarkdown = props => (\n  <MarkdownEditorField input={props.input} toggledStyle={true} />\n);\n\nconst ProposalSubmit = props => {\n  const {\n    isLoading,\n    PageLoadingIcon,\n    policy,\n    error,\n    warning,\n    onSave,\n    onSaveProposalDraft,\n    submitting,\n    handleSubmit,\n    validationError,\n    submitError,\n    userCanExecuteActions,\n    openModal,\n    proposalCredits,\n    loggedInAsEmail,\n    editingMode,\n    isDraftSaving,\n    draftButtonText\n  } = props;\n  const submitEnabled =\n    loggedInAsEmail &&\n    !submitting &&\n    !error &&\n    !validationError &&\n    userCanExecuteActions &&\n    (proposalCredits > 0 || editingMode);\n\n  return !policy || isLoading ? (\n    <PageLoadingIcon />\n  ) : (\n    <div className=\"content\" role=\"main\">\n      <div className=\"page submit-proposal-page\">\n        <ReactBody className=\"submit-page\" />\n        <div className=\"submit conztent warn-on-unload\" id=\"newlink\">\n          {validationError && (\n            <Message type=\"error\" header=\"Error creating proposal\">\n              <MultipleItemsBodyMessage items={validationError} />\n            </Message>\n          )}\n          {!error && warning && (\n            <Message type=\"warn\" header=\"Warning\">\n              <MultipleItemsBodyMessage items={warning} />\n            </Message>\n          )}\n          <div className=\"formtabs-content\">\n            <div className=\"spacer\">\n              <Field\n                name=\"global\"\n                component={props => (\n                  <ErrorField title=\"Cannot submit proposal\" {...props} />\n                )}\n              />\n              <div className=\"roundfield\" id=\"title-field\">\n                <div className=\"roundfield-content\">\n                  <div style={{ display: \"flex\", width: \"100%\" }}>\n                    <Field\n                      name=\"name\"\n                      component={InputFieldWithError}\n                      tabIndex={1}\n                      type=\"text\"\n                      placeholder=\"Proposal Name\"\n                    />\n                    {editingMode ? (\n                      <div\n                        style={{\n                          flex: \"1\",\n                          display: \"flex\",\n                          justifyContent: \"flex-end\"\n                        }}\n                      >\n                        <span style={{ color: \"#777\" }}>\n                          <i className=\"fa fa-edit right-margin-5\" />\n                          Editing\n                        </span>\n                      </div>\n                    ) : null}\n                  </div>\n                  <input name=\"kind\" type=\"hidden\" defaultValue=\"self\" />\n                  <div className=\"usertext\">\n                    <input name=\"thing_id\" type=\"hidden\" defaultValue />\n                    <div className=\"usertext-edit md-container\" style={{}}>\n                      <div className=\"md\">\n                        <Field\n                          name=\"description\"\n                          component={ToggledMarkdown}\n                          tabIndex={2}\n                          placeholder=\"Markdown Entry\"\n                          rows={20}\n                          cols={80}\n                        />\n                        <a\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          href={PROPOSAL_GUIDELINES}\n                          style={{ fontSize: \"1.01em\" }}\n                        >\n                          Learn how to format your proposal\n                        </a>\n                        <Field\n                          name=\"files\"\n                          className=\"attach-button greenprimary\"\n                          component={FilesField}\n                          userCanExecuteActions={userCanExecuteActions}\n                          placeholder=\"Attach a file\"\n                          policy={policy}\n                          normalize={normalizer}\n                        />\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"submit-wrapper\">\n                    <button\n                      className={`togglebutton access-required${!submitEnabled &&\n                        \" not-active disabled\"}`}\n                      name=\"submit\"\n                      type=\"submit\"\n                      value=\"form\"\n                      onClick={handleSubmit(onSave)}\n                    >\n                      {!editingMode ? \"submit\" : \"update\"}\n                    </button>\n                    <ButtonWithLoadingIcon\n                      className={\"togglebutton secondary access-required\"}\n                      name=\"submit\"\n                      type=\"submit\"\n                      value=\"form\"\n                      text={draftButtonText}\n                      onClick={handleSubmit(onSaveProposalDraft)}\n                      isLoading={isDraftSaving}\n                    />\n                    {proposalCredits === 0 && !editingMode && (\n                      <div className=\"submit-button-error\">\n                        To submit a proposal, you must purchase a proposal\n                        credit.\n                        <span\n                          className=\"linkish\"\n                          onClick={() => openModal(MANAGE_CREDITS_MODAL)}\n                        >\n                          {\" \"}\n                          Click here\n                        </span>{\" \"}\n                        to open the proposal credits manager.\n                      </div>\n                    )}\n                    <p\n                      style={{\n                        fontSize: \"16px\",\n                        display: \"flex\",\n                        paddingTop: \"1em\"\n                      }}\n                    >\n                      <b>NOTE:&nbsp;</b> Drafts are locally stored in the\n                      browser and will NOT be available across different\n                      browsers or devices.\n                    </p>\n                  </div>\n                  {submitError ? (\n                    <Message\n                      type=\"error\"\n                      header={`Error ${\n                        editingMode ? \"updating\" : \"creating\"\n                      } proposal`}\n                      body={submitError}\n                    />\n                  ) : null}\n                </div>\n              </div>\n            </div>\n            <div className=\"spacer\">\n              <div className=\"roundfield\">\n                <MarkdownHelp />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProposalSubmit;\n","/**\n * Checks if `value` is `undefined`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n * @example\n *\n * _.isUndefined(void 0);\n * // => true\n *\n * _.isUndefined(null);\n * // => false\n */\nfunction isUndefined(value) {\n  return value === undefined;\n}\n\nmodule.exports = isUndefined;","var arrayPush = require('./_arrayPush'),\n    baseFlatten = require('./_baseFlatten'),\n    copyArray = require('./_copyArray'),\n    isArray = require('./isArray');\n/**\n * Creates a new array concatenating `array` with any additional arrays\n * and/or values.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to concatenate.\n * @param {...*} [values] The values to concatenate.\n * @returns {Array} Returns the new concatenated array.\n * @example\n *\n * var array = [1];\n * var other = _.concat(array, 2, [3], [[4]]);\n *\n * console.log(other);\n * // => [1, 2, 3, [4]]\n *\n * console.log(array);\n * // => [1]\n */\n\n\nfunction concat() {\n  var length = arguments.length;\n\n  if (!length) {\n    return [];\n  }\n\n  var args = Array(length - 1),\n      array = arguments[0],\n      index = length;\n\n  while (index--) {\n    args[index - 1] = arguments[index];\n  }\n\n  return arrayPush(isArray(array) ? copyArray(array) : [array], baseFlatten(args, 1));\n}\n\nmodule.exports = concat;","import React from \"react\";\n\nconst InputFieldWithError = ({\n  input,\n  label,\n  placeholder,\n  tabIndex,\n  type,\n  meta: { touched, error, warning }\n}) => (\n  <div className=\"input-with-error\">\n    <label>{label}</label>\n    <input\n      {...input}\n      tabIndex={tabIndex}\n      placeholder={placeholder}\n      type={type}\n    />\n    <div className=\"input-subline\">\n      {touched &&\n        ((error && <div className=\"input-error\">{error}</div>) ||\n          (warning && <div className=\"input-warning\">{warning}</div>))}\n    </div>\n  </div>\n);\n\nexport default InputFieldWithError;\n","import React from \"react\";\nimport Message from \"../../Message\";\n\nconst PolicyErrors = ({ errors }) => (\n  <div>\n    {errors.map((error, idx) => (\n      <Message key={idx} body={error} type=\"error\" />\n    ))}\n  </div>\n);\n\nexport default PolicyErrors;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport ReactFileReader from \"react-file-reader\";\nimport { change } from \"redux-form\";\nimport ProposalImages from \"../../ProposalImages\";\nimport PolicyErrors from \"./PolicyErrors\";\nimport { validateFiles, getFormattedFiles } from \"../../ProposalImages/helpers\";\nimport isArray from \"lodash/isArray\";\nimport isUndefined from \"lodash/isUndefined\";\nimport concat from \"lodash/concat\";\nimport cloneDeep from \"lodash/cloneDeep\";\n\nexport class FilesField extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      policyErrors: []\n    };\n  }\n\n  handleFilesChange = files => {\n    const {\n      input,\n      meta: { dispatch },\n      policy\n    } = this.props;\n\n    const formattedFiles = getFormattedFiles(files);\n    const inputAndNewFiles = input.value\n      ? formattedFiles.concat(input.value)\n      : formattedFiles;\n    const validation = validateFiles(inputAndNewFiles, policy);\n    const { errors, files: validFiles } = validation;\n    this.setState({\n      policyErrors: errors ? errors : []\n    });\n    if (validation.errors.length > 0) {\n      if (validFiles.length > 0) {\n        return dispatch(change(\"form/record\", \"files\", validFiles));\n      }\n      return;\n    }\n    return dispatch(change(\"form/record\", \"files\", inputAndNewFiles));\n  };\n\n  render() {\n    const {\n      placeholder = \"Upload\",\n      input,\n      touched,\n      error,\n      disabled,\n      policy,\n      userCanExecuteActions\n    } = this.props;\n    const { policyErrors } = this.state;\n    const buttonStyle = {\n      margin: 0\n    };\n    return (\n      policy && (\n        <div className=\"attach-wrapper\">\n          {policyErrors.length > 0 && <PolicyErrors errors={policyErrors} />}\n          <div>\n            <ReactFileReader\n              base64\n              multipleFiles\n              fileTypes={policy.validmimetypes}\n              handleFiles={this.handleFilesChange}\n            >\n              <div className=\"button-wrapper\">\n                <button\n                  className={`togglebutton access-required${\n                    !userCanExecuteActions ? \" not-active disabled\" : \"\"\n                  }`}\n                  style={buttonStyle}\n                >\n                  {placeholder}\n                </button>\n                <div className=\"attach-requirements\">\n                  <div>\n                    {\" \"}\n                    Max number of files: <span>{policy.maximages}.</span>{\" \"}\n                  </div>\n                  <div>\n                    {\" \"}\n                    Max file size:{\" \"}\n                    <span>\n                      {Math.floor(policy.maximagesize / 1024)} Kb.{\" \"}\n                    </span>{\" \"}\n                  </div>\n                  <div>\n                    {\" \"}\n                    Valid MIME types:{\" \"}\n                    <span>{policy.validmimetypes.join(\", \")}</span>{\" \"}\n                  </div>\n                </div>\n              </div>\n            </ReactFileReader>\n          </div>\n          {touched && error && !disabled && (\n            <span className=\"error\">{error}</span>\n          )}\n          <ProposalImages files={input.value || []} onChange={input.onChange} />\n        </div>\n      )\n    );\n  }\n}\n\nFilesField.propTypes = {\n  placeholder: PropTypes.string.isRequired,\n  input: PropTypes.object.isRequired,\n  touched: PropTypes.bool,\n  error: PropTypes.bool,\n  disabled: PropTypes.bool,\n  policy: PropTypes.object\n};\n\nexport const normalizer = (value, previousValue) => {\n  let files = [];\n\n  if (previousValue && isArray(previousValue)) {\n    files = cloneDeep(previousValue);\n  }\n\n  // Delete images\n  if (!isUndefined(value.remove)) {\n    files.splice(value.remove, 1);\n  }\n\n  // Add images\n  if (isArray(value)) {\n    files = concat(files, value);\n  }\n\n  return files;\n};\n"],"sourceRoot":""}