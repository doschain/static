(this.webpackJsonputxo=this.webpackJsonputxo||[]).push([[3],{72:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var a=n(11),c=n(0),r=n.n(c),l=(n(72),n(16)),o=n(9),s=n(8),u=n.n(s),i=n(12),m="http://proxy-mainnet.doschain.org/insight",p="http://mainnet.doschain.org/insight";function d(){return(d=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(u.a.mark((function e(n,a){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:c=e.sent,n(JSON.parse(c)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}"games.doschain.org"!==window.location.host&&(m="http://35.220.198.141:8083",p="https://testnet.doschain.org/insight");var f=function(e,t){return function(e){return d.apply(this,arguments)}(window.demos.allin.submit(e,t,"",""))};t.default=Object(l.e)()((function(e){var t=e.address,n=Object(c.useState)(null),s=Object(a.a)(n,2),u=s[0],i=s[1],d=Object(c.useState)(1),E=Object(a.a)(d,2),b=E[0],h=E[1],v=Object(c.useState)(!1),O=Object(a.a)(v,2),j=O[0],w=O[1],g=Object(c.useState)(!1),k=Object(a.a)(g,2),N=k[0],y=k[1],x=Object(c.useState)(0),S=Object(a.a)(x,2),C=S[0],I=S[1];function J(){(function(e){return window.demos.request({method:"GET",url:"".concat(m,"/api/").concat(e,"/state")})})(t).then((function(e){e.ret&&(i(e.data),function(e,t){return window.demos.request({method:"GET",url:"".concat(p,"/api/addr/").concat(e,"/token/").concat(t)})}(t,e.data.token).then((function(e){I(e)})))}))}return Object(c.useEffect)((function(){t&&J()}),[t]),Object(c.useEffect)((function(){var e=setInterval((function(){try{Date.now()/1e3>u.settle&&(y(!0),clearInterval(e))}catch(t){}}),2e3);return function(){clearInterval(e),console.log("test end")}})),u?r.a.createElement("div",{className:"p-home"},r.a.createElement("div",{className:"block1"},r.a.createElement("div",null,r.a.createElement("p",null,"\u5956\u6c60\u91d1\u989d"),r.a.createElement("strong",null,u.total)),r.a.createElement("div",null,r.a.createElement("p",null,"KEY\u5206\u7ea2"),r.a.createElement("strong",null,u.total*u["key-scale"]/100))),r.a.createElement("div",{className:"block2"},r.a.createElement("div",{className:"time"},function(e){var t=new Date(1e3*e);return"".concat(Object(o.a)(t.getHours()),":").concat(Object(o.a)(t.getMinutes()),":").concat(Object(o.a)(t.getSeconds()))}(u.settle)),r.a.createElement("div",{className:"row row1"},r.a.createElement("p",null,"KEY\u4ef7\u683c: ",u.price),r.a.createElement("div",null,r.a.createElement("p",{onClick:function(){h(b+1)}},"\u52a01"),r.a.createElement("p",{onClick:function(){h(b+10)}},"\u52a010"))),r.a.createElement("div",{className:"row"},r.a.createElement("p",null,"\u6211\u7684KEY: ",u.keys)),r.a.createElement("div",{className:"row row3"},r.a.createElement("p",null,"\u6700\u540e\u4e00\u540d\u73a9\u5bb6:"),r.a.createElement("p",null,u["last-key"]))),r.a.createElement("div",{className:"block3"},r.a.createElement("p",null,"\u8d2d\u4e70\u6570\u91cf: ",r.a.createElement(l.b,{type:"text",onChange:function(e){var t="string"===typeof e?e:e.target.value;t>0||(t=1),h(t)},value:b})),r.a.createElement("button",{onClick:function(){if(t&&u)if(u.status&&!N){var e=u.price*b+u["price-step"]*(b-1)*b/2;e>C?Object(o.c)("\u4f59\u989d\u4e0d\u8db3"):(w(!0),f(e,b).then((function(e){w(!1),e.ret?(Object(o.c)("\u8d2d\u4e70\u6210\u529f"),J()):Object(o.c)(e.data,6e3)}),(function(e){w(!1)})))}else Object(o.c)("\u7ed3\u7b97\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")},className:!u.status||N?"disabled":""},"\u8d2d\u4e70")),j&&r.a.createElement(l.d,null)):r.a.createElement("div",{className:"p-home"},r.a.createElement(l.c,null))}))}}]);