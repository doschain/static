(this.webpackJsonputxo=this.webpackJsonputxo||[]).push([[3],{72:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(12),c=a(0),r=a.n(c),l=(a(72),a(16)),s=a(8),o=a(9),u=a.n(o),i=a(13),m="http://proxy-mainnet.doschain.org/insight",p="http://mainnet.doschain.org/insight";function d(){return(d=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(u.a.mark((function e(a,n){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:c=e.sent,a(JSON.parse(c)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}"games.doschain.org"!==window.location.host&&(m="http://35.220.198.141:8083",p="https://testnet.doschain.org/insight");var b,f=function(e,t,a){return function(e){return d.apply(this,arguments)}(window.demos.allin.submit(e,t,a,""))};t.default=Object(l.f)()((function(e){var t,a=e.address,o=Object(c.useState)(null),u=Object(n.a)(o,2),i=u[0],d=u[1],E=Object(c.useState)(1),v=Object(n.a)(E,2),h=v[0],O=v[1],j=Object(c.useState)(!1),w=Object(n.a)(j,2),g=w[0],k=w[1],N=Object(c.useState)(0),y=Object(n.a)(N,2),x=y[0],I=y[1],S=Object(c.useState)(0),C=Object(n.a)(S,2),J=C[0],K=C[1],Y=Object(c.useState)(""),q=Object(n.a)(Y,2),D=q[0],G=q[1];function T(){(function(e){return window.demos.request({method:"GET",url:"".concat(m,"/api/").concat(e,"/state")})})(a).then((function(e){e.ret&&(d(e.data),function(e){var t=parseInt(e-Date.now()/1e3);t>0&&(I(t),clearInterval(b),b=setInterval((function(){(t=parseInt(e-Date.now()/1e3))<=0&&(t=0,clearInterval(b)),I(t)}),1e3))}(e.data.settle),function(e,t){return window.demos.request({method:"GET",url:"".concat(p,"/api/addr/").concat(e,"/token/").concat(t)})}(a,e.data.token).then((function(e){K(e)})))}))}return Object(c.useEffect)((function(){a&&T()}),[a]),i?r.a.createElement("div",{className:"p-home"},r.a.createElement("div",{className:"block1"},r.a.createElement("div",null,r.a.createElement("p",null,"\u5956\u6c60\u91d1\u989d"),r.a.createElement("strong",null,i.total)),r.a.createElement("div",null,r.a.createElement("p",null,"KEY\u5206\u7ea2"),r.a.createElement("strong",null,i.total*i["key-scale"]/100))),r.a.createElement("div",{className:"block2"},r.a.createElement("div",{className:"time"},(t=x,"".concat(Object(s.a)(parseInt(t/3600)),":").concat(Object(s.a)(parseInt(t/60)),":").concat(Object(s.a)(t%60)))),r.a.createElement("div",{className:"row row1"},r.a.createElement("p",null,"KEY\u4ef7\u683c: ",i.price),r.a.createElement("div",null,r.a.createElement("p",{onClick:function(){O(h+1)}},"\u52a01"),r.a.createElement("p",{onClick:function(){O(h+10)}},"\u52a010"))),r.a.createElement("div",{className:"row"},r.a.createElement("p",null,"\u6211\u7684KEY: ",i.keys)),r.a.createElement("div",{className:"row row3"},r.a.createElement("p",null,"\u6700\u540e\u4e00\u540d\u73a9\u5bb6:"),r.a.createElement("p",null,i["last-key"]||"\u65e0"))),r.a.createElement("div",{className:"block4"},r.a.createElement("p",null,"\u9080\u8bf7\u5730\u5740: ",i.code||r.a.createElement(l.e,{placeholder:"\u8bf7\u586b\u5199",onChange:function(e){var t="string"===typeof e?e:e.target.value;G(t)},value:D}))),r.a.createElement("div",{className:"block3"},r.a.createElement("p",null,"\u8d2d\u4e70\u6570\u91cf: ",r.a.createElement(l.b,{type:"text",onChange:function(e){var t="string"===typeof e?e:e.target.value;t>0||(t=1),O(t)},value:h})),r.a.createElement("button",{onClick:function(){if(a&&i)if(!i.status||x<=0)Object(s.c)("\u7ed3\u7b97\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");else{var e=i.price*h+i["price-step"]*(h-1)*h/2;e>J?Object(s.c)("\u4f59\u989d\u4e0d\u8db3"):D?a.substring(0,2)===D.substring(0,2)?(k(!0),f(e,h,D).then((function(e){k(!1),e.ret?(Object(s.c)("\u8d2d\u4e70\u6210\u529f"),T()):Object(s.c)(e.data,6e3)}),(function(e){k(!1)}))):Object(s.c)("\u8bf7\u586b\u5199\u6b63\u786e\u7684\u9080\u8bf7\u5730\u5740"):Object(s.c)("\u8bf7\u586b\u5199\u9080\u8bf7\u5730\u5740")}},className:!i.status||x<=0?"disabled":""},"\u8d2d\u4e70")),g&&r.a.createElement(l.d,null)):r.a.createElement("div",{className:"p-home"},r.a.createElement(l.c,null))}))}}]);