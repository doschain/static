{"version":3,"sources":["services/network.js","page/dappDetail/dappDetail.module.scss","page/dappDetail/index.js"],"names":["hosts","getDappList","addr","state","page","limit","category","queryStr","window","demos","request","method","url","getCategorites","getDappDevInfo","getDappInfo","id","fetchBuyDapp","rawtx","gain","code","mail","data","location","host","getOrders","address","getOrdersDetails","module","exports","DappDetail","props","history","search","dapp_id","match","params","useState","dappInfo","setDappinfo","useEffect","a","ret","time","console","log","price","fetch","logo","name","order_time","cur_tab","substr","split","isAbleBuy","title","className","cx","styles","src","now","banners","alt","describe","disabled","btnBuy","dsb","onClick","push"],"mappings":"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","file":"static/js/8.347a9aa3.chunk.js","sourcesContent":["let hosts = \"http://proxy-mainnet.doschain.org/insight\";\n// let hosts2 = \"http://mainnet.doschain.org/insight\";\nif (window.location.host !== \"games.doschain.org\") {\n  hosts = \"http://35.220.198.141:8088\";\n  // hosts = \"http://10.0.0.11:8088\";\n  // hosts = \"http://10.0.0.15:8083\";\n  // hosts2 = \"https://testnet.doschain.org/insight\";\n}\n\n/**\n * @param {String} addr 钱包地址\n * @param {String} state 应用类别 0:待申购，1:已申购\n * @param {number} page 当前页码\n * @param {number} limit 一页显示的数量\n * @param {number} category 分类id\n * @description 首页请求dapp应用列表\n */\nexport function getDappList({ addr, state, page, limit, category }) {\n  let queryStr = `${hosts}/v1/api/apps/${addr}/${state}/?page=${page}&limit=${limit}`;\n  if (category) queryStr += `&category=${category}`;\n\n  return window.demos.request({\n    method: \"GET\",\n    url: queryStr,\n  });\n}\n\n/**\n *\n * @description 获取首页分类列表\n */\nexport function getCategorites() {\n  return window.demos.request({\n    method: \"GET\",\n    url: `${hosts}/v1/api/category`,\n  });\n}\n\n/**\n *\n * @description 获取首页开发应用的信息\n */\nexport function getDappDevInfo() {\n  return window.demos.request({ method: \"GET\", url: `${hosts}/v1/api/state` });\n}\n\n/**\n *\n * @param {number} id 应用ID\n * @description 获取应用详情信息\n */\nexport function getDappInfo(id) {\n  return window.demos.request({\n    method: \"GET\",\n    url: `${hosts}/v1/api/app/${id}`,\n  });\n}\n\n/**\n *\n * @param {String} addr 钱包地址\n * @param {String} raw  待广播交易哈希\n * @param {number} id   应用ID\n * @param {String} gain 收益地址\n * @param {String} code 邀请矿池地址 (非必填)\n * @param {String} mail 邮箱地址\n */\nexport function fetchBuyDapp({ addr, rawtx, id, gain, code, mail }) {\n  return window.demos.request({\n    method: \"POST\",\n    url: `${hosts}/v1/api/app/${addr}/pay`,\n    data: {\n      rawtx,\n      id,\n      gain,\n      code,\n      mail,\n    },\n  });\n}\n\n/**\n * @param {String} address 钱包地址\n * @description 获取订单记录\n */\nexport const getOrders = (address) => {\n  return window.demos.request({\n    method: \"GET\",\n    url: `${hosts}/v1/api/orders/${address}`,\n  });\n};\n\n/**\n * @param {String} address 钱包地址\n * @param {String} id 订单id\n * @description 获取订单详情\n */\nexport const getOrdersDetails = (address, id) => {\n  return window.demos.request({\n    method: \"GET\",\n    url: `${hosts}/v1/api/order/${address}/${id}`,\n  });\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dapp-detail\":\"dappDetail_dapp-detail__32VWL\",\"dapp-header\":\"dappDetail_dapp-header__PZpQh\",\"dapp-intro\":\"dappDetail_dapp-intro__2HCUf\",\"dapp-intro__info\":\"dappDetail_dapp-intro__info__kPmzm\",\"dapp-intro__info-name\":\"dappDetail_dapp-intro__info-name__2X5aZ\",\"dapp-intro__info-price\":\"dappDetail_dapp-intro__info-price__1rqP-\",\"dapp-intro__info-count\":\"dappDetail_dapp-intro__info-count__1PJef\",\"dapp-intro__content\":\"dappDetail_dapp-intro__content__2Q8dk\",\"dapp-intro__content-title\":\"dappDetail_dapp-intro__content-title__2zCaP\",\"dapp-intro__content-img\":\"dappDetail_dapp-intro__content-img__COK2p\",\"dapp-intro__content-desc\":\"dappDetail_dapp-intro__content-desc__AdS_1\",\"btnBuy\":\"dappDetail_btnBuy__60Qvg\",\"dsb\":\"dappDetail_dsb__jfeiV\"};","import React, { useState, useEffect, Fragment } from \"react\";\nimport cx from \"classnames\";\nimport { PageWrapper, CountDown } from \"../../components\";\nimport { getDappInfo } from \"../../services/network\";\nimport styles from \"./dappDetail.module.scss\";\n\nconst DappDetail = (props) => {\n  const {\n    history,\n    history: {\n      location: { search },\n    },\n    match: {\n      params: { id: dapp_id },\n    },\n  } = props;\n\n  const [dappInfo, setDappinfo] = useState({});\n  useEffect(() => {\n    const fetch = async () => {\n      const { ret, data = {}, time } = await getDappInfo(dapp_id);\n      console.log(\"data\", data);\n      if (ret) setDappinfo({ ...data, price: data.price / 1e8, time });\n    };\n    fetch();\n  }, []);\n\n  const { logo, name, price, order_time, time, state } = dappInfo;\n  const cur_tab = search.substr(1).split(\"=\")[1];\n  let isAbleBuy = true;\n\n  if (state == 2) {\n    isAbleBuy = false;\n  } else {\n    isAbleBuy = cur_tab == 0 ? true : false;\n  }\n\n  return (\n    <PageWrapper title=\"dapp详情\" history={history}>\n      <div\n        className={cx({\n          page: 1,\n          [styles[\"dapp-detail\"]]: 1,\n        })}\n      >\n        <div className={styles[\"dapp-header\"]}>\n          <div className={styles[\"dapp-intro\"]}>\n            <img src={logo} />\n            <div className={styles[\"dapp-intro__info\"]}>\n              <span className={styles[\"dapp-intro__info-name\"]}>{name}</span>\n              <span className={styles[\"dapp-intro__info-price\"]}>\n                {`价格:${price} DOS`}\n              </span>\n              {state == 1 && order_time > 0 && (\n                <CountDown\n                  className={styles[\"dapp-intro__info-count\"]}\n                  time={order_time}\n                  now={time}\n                />\n              )}\n            </div>\n          </div>\n        </div>\n        <div className={styles[\"dapp-intro__content\"]}>\n          {dappInfo.banners && (\n            <Fragment>\n              <h2 className={styles[\"dapp-intro__content-title\"]}>介绍</h2>\n              <div className={styles[\"dapp-intro__content-img\"]}>\n                <img src={dappInfo.banners} alt=\"dapp intro\" />\n              </div>\n            </Fragment>\n          )}\n          <h2 className={styles[\"dapp-intro__content-title\"]}>应用详情</h2>\n          <div className={styles[\"dapp-intro__content-desc\"]}>\n            <p>{dappInfo.describe}</p>\n          </div>\n        </div>\n        <button\n          disabled={!isAbleBuy}\n          className={cx({\n            [styles.btnBuy]: 1,\n            [styles.dsb]: !isAbleBuy,\n          })}\n          onClick={() => history.push(`/dapp_buy/${dapp_id}`)}\n        >\n          {isAbleBuy ? \"申购\" : \"已申购\"}\n        </button>\n      </div>\n    </PageWrapper>\n  );\n};\n\nexport default DappDetail;\n"],"sourceRoot":""}