(this.webpackJsonpdemos_dapp=this.webpackJsonpdemos_dapp||[]).push([[6],{285:function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"f",(function(){return u})),a.d(t,"g",(function(){return m}));var n="http://proxy-mainnet.doschain.org/insight";function r(e){var t=e.addr,a=e.state,r=e.page,c=e.limit,o=e.category,i="".concat(n,"/v1/api/apps/").concat(t,"/").concat(a,"/?page=").concat(r,"&limit=").concat(c);return o&&(i+="&category=".concat(o)),window.demos.request({method:"GET",url:i})}function c(){return window.demos.request({method:"GET",url:"".concat(n,"/v1/api/category")})}function o(){return window.demos.request({method:"GET",url:"".concat(n,"/v1/api/state")})}function i(e){return window.demos.request({method:"GET",url:"".concat(n,"/v1/api/app/").concat(e)})}function s(e){var t=e.addr,a=e.rawtx,r=e.id,c=e.gain,o=e.code,i=e.mail;return window.demos.request({method:"POST",url:"".concat(n,"/v1/api/app/").concat(t,"/pay"),data:{rawtx:a,id:r,gain:c,code:o,mail:i}})}"games.doschain.org"!==window.location.host&&(n="http://35.220.198.141:8088");var u=function(e){return window.demos.request({method:"GET",url:"".concat(n,"/v1/api/orders/").concat(e)})},m=function(e,t){return window.demos.request({method:"GET",url:"".concat(n,"/v1/api/order/").concat(e,"/").concat(t)})}},286:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return u}));a(12),a(88),a(92),a(93),a(95),a(94),a(0);var n={imgSrc:"".concat("https://cdn.jsdelivr.net/gh/doschain/static/subscribe","/images")},r=(a(287),a(288)),c=a.n(r),o=a(289),i=a.n(o).a.create({baseURL:"/v1/api/",timeout:1e4});i.interceptors.response.use((function(e){if(e){var t=e.status,a=e.data,n=a.ret,r=a.data,o=void 0===r?null:r;if(200===parseInt(t)){var i={success:n,data:o};return i.success||c.a.fail(i.data,1.5),i}}else c.a.fail("\u8bf7\u6c42\u51fa\u9519",1.5)}),(function(e){return Promise.reject(e)})),i.interceptors.request.use((function(e){if(e.data&&"post"===e.method){e.headers["Content-Type"]="application/x-www-form-urlencoded";var t="";for(var a in e.data)t+=encodeURIComponent(a)+"="+encodeURIComponent(e.data[a])+"&";e.data=t.substring(0,t.length-1)}return e}),(function(e){return Promise.reject(e)}));a(87);function s(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e*a,r=n+86400*a,c=t*a-r;return c>0?null:[c,r]}var u=function(e){if(!e)return"";var t=e.length;return"".concat(e.substr(0,10),"...").concat(e.substr(t-10,t))}},318:function(e,t,a){e.exports={home:"home_home__3lina","home-title":"home_home-title__3DRdN","home-tab":"home_home-tab__fwBi0","home-tab__container":"home_home-tab__container__cts_r","home-tab__container-button":"home_home-tab__container-button__1pJcS",leftButton:"home_leftButton__2r89s",active:"home_active__24_TE",rightButton:"home_rightButton__2cofC",unActive:"home_unActive__R7YBJ","home-tab__container-tag":"home_home-tab__container-tag__1YD1_","home-dapp":"home_home-dapp__3cnl7","home-dapp__developing":"home_home-dapp__developing__3bRYP","home-dapp__list":"home_home-dapp__list__2AV6S","home-dapp__card":"home_home-dapp__card__eeGZW","home-dapp__card-logo":"home_home-dapp__card-logo__8xUUz","home-dapp__card-info":"home_home-dapp__card-info__22UEW","dapp-name":"home_dapp-name__2l-ag","dapp-price":"home_dapp-price__3chBD","home-dapp__card-countDown":"home_home-dapp__card-countDown__pGBi_",dsb:"home_dsb__1PRwr","no-data":"home_no-data__1MTmR","go-history":"home_go-history__2zGtU"}},328:function(e,t,a){"use strict";a.r(t);var n=a(12),r=a.n(n),c=a(84);var o=a(100);function i(e){return function(e){if(Array.isArray(e))return Object(c.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(o.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=a(19),u=a(88),m=a(87),d=a(90),l=a(0),p=a.n(l),_=a(101),h=a(54),f=a.n(h),b=a(286),v=a(285),g=a(89),E=a(318),w=a.n(E),j=function(e){var t=e.text,a=e.className,n=e.onTap,r=void 0===n?function(){}:n;return p.a.createElement("button",{className:a,onClick:r},t)},O=function(e){var t=e.data;return p.a.createElement("div",{className:w.a["home-dapp__developing"]},(null===t||void 0===t?void 0:t.name)?p.a.createElement(l.Fragment,null,p.a.createElement("p",null,"\u5f53\u524d\u5f00\u53d1\u4efb\u52a1: ".concat(t.name)),p.a.createElement("p",null,"\u9884\u8ba1\u5b8c\u6210\uff1a".concat(t.time))):p.a.createElement("p",{style:{marginTop:"0.18rem"}},"\u6682\u65e0\u5f00\u53d1\u4e2dDapp"))},y=function(e){var t=e.data,a=void 0===t?{}:t,n=e.history,r=e.curTab,c=a.id,o=a.name,i=a.logo,s=a.price,u=a.order_time;return p.a.createElement("div",{className:w.a["home-dapp__card"]},p.a.createElement(_.b,{to:{pathname:"/dapp_detail/".concat(c),state:{cur_tab:r}}},p.a.createElement("img",{className:w.a["home-dapp__card-logo"],alt:"dapp",src:i}),p.a.createElement("div",{className:w.a["home-dapp__card-info"]},p.a.createElement("span",{className:w.a["dapp-name"]},o),p.a.createElement("span",{className:w.a["dapp-price"]},"".concat(s," DOS")))),0===r&&u>0&&p.a.createElement("div",{className:w.a["home-dapp__card-countDown"]},p.a.createElement("span",null,"\u5012\u8ba1\u65f6\uff1a"),p.a.createElement(g.b,{duration:Object(b.c)(u)})),p.a.createElement("button",{className:f()(Object(d.a)({},w.a.dsb,1===r)),disabled:1===r,onClick:function(){n.push("/dapp_buy/".concat(c))}},"\u7acb\u5373\u7533\u8d2d"))},N=function(e){var t=e.loading,a=e.list,n=e.curTab,r=e.history;return t?p.a.createElement(g.f,null):0===a.length?p.a.createElement("div",{className:w.a["no-data"]},p.a.createElement("img",{src:"".concat(b.a.imgSrc,"/no_data.png"),alt:""}),p.a.createElement("span",null,"\u6682\u65e0\u76f8\u5173\u6570\u636e")):p.a.createElement(l.Fragment,null,a.map((function(e){return p.a.createElement(y,{data:e,history:r,curTab:n,key:e.id.toString()})})))};t.default=function(e){var t,a,n=Object(l.useContext)(g.d),c=Object(l.useState)(-1),o=Object(m.a)(c,2),h=o[0],b=o[1],E=Object(l.useState)(0),y=Object(m.a)(E,2),S=y[0],T=y[1],x=Object(l.useState)([{id:-1,name:"\u5168\u90e8"}]),k=Object(m.a)(x,2),B=k[0],C=k[1],G=Object(l.useState)(!0),q=Object(m.a)(G,2),A=q[0],D=q[1],R=Object(l.useState)(null),U=Object(m.a)(R,2),I=U[0],P=U[1];Object(l.useEffect)((function(){L(),M()}),[]);var J=Object(l.useState)({list:[],page:1,limit:10,total:0}),Y=Object(m.a)(J,2),z=Y[0],F=Y[1];Object(l.useEffect)((function(){W()}),[n.wallet_address]);var W=function(){var e=Object(u.a)(r.a.mark((function e(t){var a,c,o,u,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(s.a)({addr:n.wallet_address,state:0,page:1,limit:10,category:null},t),D(!0),e.next=4,Object(v.e)(a);case 4:if(c=e.sent,o=c.ret,u=c.data,D(!1),o&&u){e.next=10;break}return e.abrupt("return");case 10:(m={page:u.page,total:u.total,list:1===(null===t||void 0===t?void 0:t.page)?i(u.list):[].concat(i(z.list),i(u.list))}).list=m.list.map((function(e){return e.price=e.price/1e8,e})),F(m);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(u.a)(r.a.mark((function e(){var t,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.c)();case 2:t=e.sent,a=t.ret,c=t.data,a&&P({name:c.name,time:c.time}),n.updateStore({target_address:c.address,contract:c.contract});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(r.a.mark((function e(){var t,a,n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.b)();case 2:if(t=e.sent,a=t.ret,n=t.data,c=void 0===n?[]:n,a&&0!==c.length){e.next=8;break}return e.abrupt("return");case 8:C([].concat(i(B),i(c)));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(e){T(e),W({page:1,category:null})};return p.a.createElement("div",{className:w.a.home},p.a.createElement(_.b,{className:w.a["go-history"],to:"/history"},"\u7533\u8d2d\u8bb0\u5f55>"),p.a.createElement("div",{className:w.a["home-title"]}),p.a.createElement("div",{className:w.a["home-tab"]},p.a.createElement("div",{className:w.a["home-tab__container"]},p.a.createElement("div",{className:w.a["home-tab__container-button"]},p.a.createElement("button",{className:f()((t={},Object(d.a)(t,w.a.leftButton,1),Object(d.a)(t,0===S?w.a.active:w.a.unActive,1),t)),onClick:function(){return V(0)}},"\u5f85\u7533\u8d2d"),p.a.createElement("button",{className:f()((a={},Object(d.a)(a,w.a.rightButton,1),Object(d.a)(a,1===S?w.a.active:w.a.unActive,1),a)),onClick:function(){return V(1)}},"\u5df2\u7533\u8d2d")),p.a.createElement("div",{className:w.a["home-tab__container-tag"]},B.map((function(e,t){var a=e.name,n=e.id;return p.a.createElement(j,{className:f()(Object(d.a)({},w.a.active,n===h)),key:n.toString(),text:a,onTap:function(){var e;(e=n)!==h&&(b(e),W({page:1,category:-1===e?null:e}))}})}))))),p.a.createElement("div",{className:w.a["home-dapp"]},p.a.createElement(O,{data:I}),p.a.createElement("div",{className:w.a["home-dapp__list"]},p.a.createElement(N,Object.assign({},e,{curTab:S,loading:A,list:z.list})))))}}}]);