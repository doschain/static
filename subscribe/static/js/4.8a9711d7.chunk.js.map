{"version":3,"sources":["services/network.js","hooks/useNow.js","utils/basicURL.js","utils/axios.js","utils/parseQuery.js","utils/formatAddr.js","page/home/home.module.scss","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","page/home/index.js"],"names":["hosts","getDappList","addr","state","page","limit","category","queryStr","window","demos","request","method","url","getCategorites","getDappDevInfo","getDappInfo","id","fetchBuyDapp","rawtx","gain","code","mail","data","location","host","getOrders","address","getOrdersDetails","useNow","_now","timer","useState","now","setNow","time","clearInterval","setInterval","imgSrc","process","instance","axios","create","baseURL","timeout","interceptors","response","use","res","status","success","ret","parseInt","handleResBody","fail","error","Promise","reject","config","headers","it","encodeURIComponent","substring","length","walletAddress","len","substr","module","exports","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","Tag","text","className","onTap","onClick","DevelopNotice","styles","name","style","marginTop","DappCard","seconds","history","curTab","logo","price","order_time","addZero","number","String","replace","to","alt","src","display","cx","dsb","disabled","push","DappList","loading","list","basicURL","map","item","noe","key","toString","Home","props","globalStore","useContext","GlobalContext","curTag","setSelectTag","setTab","categories","setCategories","setLoading","devInfo","setDevinfo","useEffect","fetchDevelopingInfo","fetchCategories","total","dappList","setDappList","fetchList","wallet_address","params","a","_resetParams","newDappList","updateStore","target_address","contract","switchTab","tabIndex","home","leftButton","active","unActive","rightButton","i","selectedTag"],"mappings":"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","file":"static/js/4.8a9711d7.chunk.js","sourcesContent":["let hosts = \"http://proxy-mainnet.doschain.org/insight\";\n// let hosts2 = \"http://mainnet.doschain.org/insight\";\nif (window.location.host !== \"games.doschain.org\") {\n  hosts = \"http://35.220.198.141:8088\";\n  // hosts = \"http://10.0.0.11:8088\";\n  // hosts = \"http://10.0.0.15:8083\";\n  // hosts2 = \"https://testnet.doschain.org/insight\";\n}\n\n/**\n * @param {String} addr 钱包地址\n * @param {String} state 应用类别 0:待申购，1:已申购\n * @param {number} page 当前页码\n * @param {number} limit 一页显示的数量\n * @param {number} category 分类id\n * @description 首页请求dapp应用列表\n */\nexport function getDappList({ addr, state, page, limit, category }) {\n  let queryStr = `${hosts}/v1/api/apps/${addr}/${state}/?page=${page}&limit=${limit}`;\n  if (category) queryStr += `&category=${category}`;\n\n  return window.demos.request({\n    method: \"GET\",\n    url: queryStr,\n  });\n}\n\n/**\n *\n * @description 获取首页分类列表\n */\nexport function getCategorites() {\n  return window.demos.request({\n    method: \"GET\",\n    url: `${hosts}/v1/api/category`,\n  });\n}\n\n/**\n *\n * @description 获取首页开发应用的信息\n */\nexport function getDappDevInfo() {\n  return window.demos.request({ method: \"GET\", url: `${hosts}/v1/api/state` });\n}\n\n/**\n *\n * @param {number} id 应用ID\n * @description 获取应用详情信息\n */\nexport function getDappInfo(id) {\n  return window.demos.request({\n    method: \"GET\",\n    url: `${hosts}/v1/api/app/${id}`,\n  });\n}\n\n/**\n *\n * @param {String} addr 钱包地址\n * @param {String} raw  待广播交易哈希\n * @param {number} id   应用ID\n * @param {String} gain 收益地址\n * @param {String} code 邀请矿池地址 (非必填)\n * @param {String} mail 邮箱地址\n */\nexport function fetchBuyDapp({ addr, rawtx, id, gain, code, mail }) {\n  return window.demos.request({\n    method: \"POST\",\n    url: `${hosts}/v1/api/app/${addr}/pay`,\n    data: {\n      rawtx,\n      id,\n      gain,\n      code,\n      mail,\n    },\n  });\n}\n\n/**\n * @param {String} address 钱包地址\n * @description 获取订单记录\n */\nexport const getOrders = (address) => {\n  return window.demos.request({\n    method: \"GET\",\n    url: `${hosts}/v1/api/orders/${address}`,\n  });\n};\n\n/**\n * @param {String} address 钱包地址\n * @param {String} id 订单id\n * @description 获取订单详情\n */\nexport const getOrdersDetails = (address, id) => {\n  return window.demos.request({\n    method: \"GET\",\n    url: `${hosts}/v1/api/order/${address}/${id}`,\n  });\n};\n","import React, {useState, useEffect, useContext} from \"react\";\n\nconst useNow = (_now, timer) => {\n    const [now, setNow] = useState(_now);\n\n    function interval(time) {\n            clearInterval(timer);\n            setNow(time);\n            timer = setInterval(() => {\n                time ++;\n                setNow(time);\n            }, 1000);\n        }\n\n    return [now, interval];\n}\n\nexport default useNow;\n","export default {\n  imgSrc: `${process.env.PUBLIC_URL}/images`,\n};\n","import axios from \"axios\";\nimport { Toast } from \"antd-mobile\";\n\nconst instance = axios.create({\n  baseURL: \"/v1/api/\",\n  timeout: 10000,\n});\n\nconst successHandler = (res) => {\n  if (!res) {\n    Toast.fail(\"请求出错\", 1.5);\n    return;\n  }\n  const {\n    status,\n    data: { ret: success, data = null },\n  } = res;\n\n  if (parseInt(status) === 200) {\n    const handleResBody = {\n      success,\n\n      // 响应数据结构体Object\n      data,\n      // 响应消息String\n    };\n\n    if (!handleResBody.success) {\n      Toast.fail(handleResBody.data, 1.5);\n    }\n    return handleResBody;\n  }\n};\n\nconst errorHandler = (error) => {\n  return Promise.reject(error);\n};\n\n// 响应拦截器\ninstance.interceptors.response.use(successHandler, errorHandler);\n\n// 请求拦截器\ninstance.interceptors.request.use(\n  (config) => {\n    if (config.data && config.method === \"post\") {\n      config.headers[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\n      let ret = \"\";\n      for (let it in config.data) {\n        ret +=\n          encodeURIComponent(it) +\n          \"=\" +\n          encodeURIComponent(config.data[it]) +\n          \"&\";\n      }\n      config.data = ret.substring(0, ret.length - 1);\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\nexport default instance;\n","function isObject(obj) {\n  if (obj === 0) return false;\n  return (\n    obj &&\n    obj.constructor &&\n    obj.constructor.toString().match(/function\\s*([^(]*)/)[1] === \"Object\"\n  );\n}\n\n/**\n *\n * @param {Object} params\n */\nfunction formatQuery(params) {\n  if (!isObject(params)) return \"\";\n\n  let query = \"\";\n  for (const key in params) {\n    query += `${key}=${params[key]}&`;\n  }\n  return query.slice(0, -1);\n}\n\n/**\n * @des 获取query参数\n */\n\nfunction getQuery(key) {\n  let query = window.location.search.slice(1);\n  query = query.split(\"&\");\n\n  if (query.length === 0) return null;\n  const queryObjs = {};\n\n  query.forEach((item) => {\n    const [key, value] = item.split(\"=\");\n    queryObjs[key] = value;\n  });\n\n  if (!key) return queryObjs;\n  return queryObjs[key] || null;\n}\n\nexport default { formatQuery, getQuery };\n","export default function (walletAddress, n = 10) {\n  if (!walletAddress) return \"\";\n  const len = walletAddress.length;\n  return `${walletAddress.substr(0, 10)}...${walletAddress.substr(\n    len - 10,\n    len\n  )}`;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"home_home__3lina\",\"home-title\":\"home_home-title__3DRdN\",\"home-tab\":\"home_home-tab__fwBi0\",\"home-tab__container\":\"home_home-tab__container__cts_r\",\"home-tab__container-button\":\"home_home-tab__container-button__1pJcS\",\"leftButton\":\"home_leftButton__2r89s\",\"active\":\"home_active__24_TE\",\"rightButton\":\"home_rightButton__2cofC\",\"unActive\":\"home_unActive__R7YBJ\",\"home-tab__container-tag\":\"home_home-tab__container-tag__1YD1_\",\"home-dapp\":\"home_home-dapp__3cnl7\",\"home-dapp__developing\":\"home_home-dapp__developing__3bRYP\",\"home-dapp__list\":\"home_home-dapp__list__2AV6S\",\"home-dapp__card\":\"home_home-dapp__card__eeGZW\",\"home-dapp__card-logo\":\"home_home-dapp__card-logo__8xUUz\",\"home-dapp__card-info\":\"home_home-dapp__card-info__22UEW\",\"dapp-name\":\"home_dapp-name__2l-ag\",\"dapp-price\":\"home_dapp-price__3chBD\",\"home-dapp__card-countDown\":\"home_home-dapp__card-countDown__pGBi_\",\"dsb\":\"home_dsb__1PRwr\",\"no-data\":\"home_no-data__1MTmR\",\"go-history\":\"home_go-history__2zGtU\"};","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React, { useState, useEffect, Fragment, useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport cx from \"classnames\";\nimport { basicURL } from \"../../utils\";\nimport {\n  getDappList,\n  getDappDevInfo,\n  getCategorites,\n} from \"../../services/network\";\nimport { Spin, CountDown, GlobalContext } from \"../../components\";\nimport styles from \"./home.module.scss\";\nimport useNow from \"../../hooks/useNow\";\nlet timer;\n\nconst Tag = ({ text, className, onTap = () => {} }) => {\n  return (\n    <button className={className} onClick={onTap}>\n      {text}\n    </button>\n  );\n};\n\nconst DevelopNotice = ({ data }) => (\n  <div className={styles[\"home-dapp__developing\"]}>\n    {data?.name ? (\n      <Fragment>\n        <p>{`当前开发任务: ${data.name}`}</p>\n        <p>{`预计完成：${data.time}`}</p>\n      </Fragment>\n    ) : (\n      <p style={{ marginTop: \"0.18rem\" }}>暂无开发中Dapp</p>\n    )}\n  </div>\n);\n\nconst DappCard = ({ data = {}, history, curTab, now }) => {\n  const { id, name, logo, price, order_time } = data;\n  function addZero(number) {\n    return String(number).replace(/^(?=(\\d))\\1$/, '0$1');\n  }\n  function formatCD(seconds) {\n    if(seconds <= 0) return '00:00:00';\n    return `${addZero(parseInt(seconds/(60*60)))}:${addZero(parseInt(seconds/60%60))}:${addZero(seconds%60)}`\n  }\n  return (\n    <div className={styles[\"home-dapp__card\"]}>\n      <Link to={`/dapp_detail/${id}/?tab=${curTab}`}>\n        <img className={styles[\"home-dapp__card-logo\"]} alt=\"dapp\" src={logo} />\n        <div className={styles[\"home-dapp__card-info\"]}>\n          <span className={styles[\"dapp-name\"]}>{name}</span>\n          <span className={styles[\"dapp-price\"]}>{`${price} DOS`}</span>\n        </div>\n      </Link>\n      {curTab === 0 && order_time > 0 && (\n          <div className={styles[\"home-dapp__card-countDown\"]}>\n            <span>倒计时：</span>\n            <span style={{display: \"inline-block\",}}>\n        {formatCD(order_time + 24*60*60 - now)}\n      </span>\n          </div>\n      )}\n      <button\n        className={cx({\n          [styles.dsb]: curTab === 1,\n        })}\n        disabled={curTab === 1}\n        onClick={() => {\n          history.push(`/dapp_buy/${id}`);\n        }}\n      >\n        立即申购\n      </button>\n    </div>\n  );\n};\n\nconst DappList = ({ loading, list, curTab, history, now }) => {\n  if (loading) return <Spin />;\n  if (list.length === 0) {\n    return (\n      <div className={styles[\"no-data\"]}>\n        <img src={`${basicURL.imgSrc}/no_data.png`} alt=\"\" />\n        <span>暂无相关数据</span>\n      </div>\n    );\n  }\n  return (\n    <Fragment>\n      {list.map((item) => (\n        <DappCard\n          data={item}\n          history={history}\n          curTab={curTab}\n          noe={now}\n          key={item.id.toString()}\n        />\n      ))}\n    </Fragment>\n  );\n};\n\nfunction Home(props) {\n  const globalStore = useContext(GlobalContext);\n  const [curTag, setSelectTag] = useState(-1);\n  const [curTab, setTab] = useState(0); // 0:待申购 1:已申购\n  const [categories, setCategories] = useState([{ id: -1, name: \"全部\" }]);\n  const [loading, setLoading] = useState(true);\n  const [now, setNow] = useNow(0, timer);\n\n  const [devInfo, setDevinfo] = useState(null);\n  useEffect(() => {\n    fetchDevelopingInfo();\n    fetchCategories();\n  }, []);\n\n  const [dappList, setDappList] = useState({\n    list: [],\n    page: 1,\n    limit: 10,\n    total: 0,\n  });\n  useEffect(() => {\n    fetchList();\n  }, [globalStore.wallet_address]);\n\n  const fetchList = async (params) => {\n    const _resetParams = {\n      addr: globalStore.wallet_address,\n      state: 0,\n      page: 1,\n      limit: 100,\n      category: null,\n      ...params,\n    };\n\n    setLoading(true);\n    const { ret, data, time } = await getDappList(_resetParams);\n    setNow(time);\n    setLoading(false);\n\n    if (!ret || !data) return;\n\n    const newDappList = {\n      page: data.page,\n      total: data.total,\n      list:\n        params?.page === 1 ? [...data.list] : [...dappList.list, ...data.list],\n    };\n    newDappList.list = newDappList.list.map((item) => {\n      item.price = item.price / 1e8;\n      item.now = time;\n      return item;\n    });\n\n    setDappList(newDappList);\n  };\n\n  const fetchDevelopingInfo = async () => {\n    const { ret, data } = await getDappDevInfo();\n    if (ret) {\n      setDevinfo({ name: data.name, time: data.time });\n    }\n    globalStore.updateStore({\n      target_address: data.address,\n      contract: data.contract,\n    });\n  };\n\n  const fetchCategories = async () => {\n    const { ret, data = [] } = await getCategorites();\n    if (!ret || data.length === 0) return;\n    setCategories([...categories, ...data]);\n  };\n\n  const clickTag = (selectedTag) => {\n    if (selectedTag === curTag) return;\n    setSelectTag(selectedTag);\n    fetchList({ page: 1, category: selectedTag === -1 ? null : selectedTag });\n  };\n\n  const switchTab = (tabIndex) => {\n    setTab(tabIndex);\n    fetchList({ page: 1, category: null, state: parseInt(tabIndex) });\n  };\n\n  return (\n    <div className={styles.home}>\n      <Link className={styles[\"go-history\"]} to=\"/history\">{`申购记录>`}</Link>\n      <div className={styles[\"home-title\"]} />\n      <div className={styles[\"home-tab\"]}>\n        <div className={styles[\"home-tab__container\"]}>\n          <div className={styles[\"home-tab__container-button\"]}>\n            <button\n              className={cx({\n                [styles.leftButton]: 1,\n                [curTab === 0 ? styles.active : styles.unActive]: 1,\n              })}\n              onClick={() => switchTab(0)}\n            >\n              待申购\n            </button>\n            <button\n              className={cx({\n                [styles.rightButton]: 1,\n                [curTab === 1 ? styles.active : styles.unActive]: 1,\n              })}\n              onClick={() => switchTab(1)}\n            >\n              已申购\n            </button>\n          </div>\n          <div className={styles[\"home-tab__container-tag\"]}>\n            {categories.map(({ name, id }, i) => (\n              <Tag\n                className={cx({\n                  [styles.active]: id === curTag,\n                })}\n                key={id.toString()}\n                text={name}\n                onTap={() => clickTag(id)}\n              />\n            ))}\n          </div>\n        </div>\n      </div>\n      <div className={styles[\"home-dapp\"]}>\n        <DevelopNotice data={devInfo} />\n        <div className={styles[\"home-dapp__list\"]}>\n          <DappList\n            {...props}\n            curTab={curTab}\n            loading={loading}\n            list={dappList.list}\n            now={now}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Home;\n"],"sourceRoot":""}