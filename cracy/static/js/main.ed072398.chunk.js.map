{"version":3,"sources":["components/GlobalContext/index.js","components/Card/index.js","components/Loading/index.js","components/Input/index.js","components/MaskLoading/index.js","components/Modal/index.js","components/index.js","utils/elementToPageTop.js","utils/asyncComponent.js","utils/basicURL.js","utils/parseQuery.js","utils/axios.js","utils/toast.js","utils/cracyTxidCache.js","utils/cracyInviteAddressCache.js","utils/index.js","Router.js","App.js","index.js"],"names":["GlobalContext","React","createContext","connect","formatter","Component","forwardRef","props","ref","Consumer","updateStore","rest","store","Object","assign","Card","children","className","Loading","Input","value","placeholder","onClick","onChange","id","e","window","demos","showKeyboard","multiple","then","data","domNode","document","getElementById","ReactDOM","createPortal","Modal","visible","onOk","elementToPageTop","importComponent","state","component","default","this","setState","C","imgSrc","process","formatQuery","params","obj","constructor","toString","match","query","key","slice","getQuery","location","search","split","length","queryObjs","forEach","item","instance","axios","create","baseURL","timeout","msg","duration","isNaN","m","createElement","innerHTML","style","cssText","body","appendChild","setTimeout","webkitTransition","opacity","removeChild","d","get","address","localStorage","set","txid","remove","invite","Home","asyncComponent","Records","ReferralCode","Pool","Share","exact","path","to","App","useState","newState","useEffect","a","getIdentity","currency","toast","getAddress","Provider","Router","html","getElementsByTagName","resize","fontSize","Math","min","clientWidth","addEventListener","initHtmlFontSize","render"],"mappings":"2HACMA,EAAgBC,IAAMC,cAAc,MACpCC,EAAU,SAAAC,GACd,OAAO,SAAAC,GACL,OAAOC,sBAAW,SAACC,EAAOC,GAAR,OAChB,kBAACR,EAAcS,SAAf,MACG,YAA+B,IAA5BC,EAA2B,EAA3BA,YAAgBC,EAAW,+BACzBC,EAAQC,OAAOC,OAAO,GAAIH,GAI9B,MAHyB,oBAAdP,IACTQ,EAAQR,EAAUQ,IAGlB,kBAACP,EAAD,iBACME,EACAK,EAFN,CAGEF,YAAaA,EACbF,IAAKA,a,MCbJ,SAASO,EAAT,GAA4C,IAA5BC,EAA2B,EAA3BA,SAA2B,IAAjBC,iBAAiB,MAAL,GAAK,EACxD,OACI,yBAAKA,UAAS,iBAAYA,IACvBD,EACD,6B,MCJO,SAASE,IACtB,OACI,yBAAKD,UAAS,aAAd,c,KCWS,SAASE,EAAOZ,GAAQ,IAAD,EACqCA,EAAhEa,aAD2B,MACnB,GADmB,IACqCb,EAApDc,mBADe,MACD,GADC,EACGC,EAAkCf,EAAlCe,QAASC,EAAyBhB,EAAzBgB,SAAUC,EAAejB,EAAfiB,GAAOb,EAD7B,YACqCJ,EADrC,mDA6BlC,OACI,yCACIiB,GAAIA,EACJJ,MAAOA,EACPC,YAAaA,EACbC,QAvBR,SAAqBG,GACjBH,GAAWA,EAAQG,GACnBC,OAAOC,MAAMC,aAAa,CACtBR,MAAOA,EACPC,YAAaA,EACbQ,UAAU,IACXC,MAAK,SAAUC,GACdR,EAASQ,OAiBTR,SAAUA,GACNZ,I,qBC/CZqB,G,MAAUC,SAASC,eAAe,SAEvB,SAAShB,IAEpB,OAAOiB,IAASC,aACZ,yBAAKnB,UAAS,kBACV,yBAAKA,UAAU,uBACX,yBAAKA,UAAU,0BAGvBe,G,MCZO,SAASK,EAAT,GAA4D,IAA3CrB,EAA0C,EAA1CA,SAA0BsB,GAAgB,EAAhCrB,UAAgC,EAAhBqB,SAASC,EAAO,EAAPA,KAK/D,OAAOD,EACH,yBAAKrB,UAAU,gBACX,yBAAKA,UAAU,mBACX,yBAAKA,UAAU,gBACVD,GAEL,yBAAKC,UAAU,iBAAiBK,QAV3B,WACbiB,GAAQA,MASA,mBAGR,KCjBR,+O,kICIeC,I,gFCFA,WAAAC,GA0BX,OA1B8B,YAE1B,WAAYlC,GAAQ,IAAD,8BACf,4CAAMA,KAEDmC,MAAQ,CACTC,UAAW,MAJA,EAFO,mNAWeF,IAXf,gBAWLE,EAXK,EAWdC,QAERC,KAAKC,SAAS,CACVH,UAAWA,IAdO,qIAmBtB,IAAMI,EAAIF,KAAKH,MAAMC,UAErB,OAAOI,EAAI,kBAAEA,EAAMF,KAAKtC,OACnB,SAtBiB,GACDN,IAAMI,YCHxB,GACX2C,OAAO,GAAD,OAAKC,oDAAL,Y,QC0CK,OAAEC,YA9BjB,SAAqBC,GACjB,GAbY,KADEC,EAcAD,KAXVC,IACAA,EAAIC,aAC0D,WAA9DD,EAAIC,YAAYC,WAAWC,MAAM,sBAAsB,GASpC,MAAO,GAdlC,IAAkBH,EAgBVI,EAAQ,GACZ,IAAK,IAAMC,KAAON,EACdK,GAAK,UAAOC,EAAP,YAAcN,EAAOM,GAArB,KAET,OAAOD,EAAME,MAAM,GAAI,IAuBGC,SAhB9B,SAAkBF,GACd,IAAID,EAAQ9B,OAAOkC,SAASC,OAAOH,MAAM,GAGzC,GAAqB,KAFrBF,EAAQA,EAAMM,MAAM,MAEVC,OAAc,OAAO,KAC/B,IAAMC,EAAY,GAOlB,OALAR,EAAMS,SAAQ,SAAAC,GAAS,IAAD,EACGA,EAAKJ,MAAM,KADd,mBACXL,EADW,KACNrC,EADM,KAElB4C,EAAUP,GAAOrC,KAGhBqC,EACEO,EAAUP,IAAQ,KADRO,I,QCQNG,E,OA3CEC,EAAMC,OAAO,CAG5BC,QAAS,SACTC,QAAS,MCRI,WAAUC,EAAKC,GAC5BA,EAAWC,MAAMD,GAAY,IAAOA,EACpC,IAAME,EAAI1C,SAAS2C,cAAc,OACjCD,EAAEE,UAAYL,EACdG,EAAEG,MAAMC,QAAQ,2RAChB9C,SAAS+C,KAAKC,YAAYN,GAC1BO,YAAW,WAETP,EAAEG,MAAMK,iBAAmB,uDAC3BR,EAAEG,MAAMM,QAAU,IAClBF,YAAW,WAAajD,SAAS+C,KAAKK,YAAYV,KAAMW,OACvDb,ICXU,GACXc,IAAK,SAAUC,GACX,OAAOC,aAAa,cAAD,OAAeD,KAAc,IAEpDE,IAAK,SAAUF,EAASG,GACpBF,aAAa,cAAD,OAAeD,IAAaG,GAE5CC,OAAQ,SAAUJ,UACPC,aAAa,cAAD,OAAeD,MCR3B,GACXD,IAAK,SAAUC,GACX,OAAOC,aAAa,gBAAD,OAAiBD,KAAc,IAEtDE,IAAK,SAAUF,EAASK,GACpBJ,aAAa,gBAAD,OAAiBD,IAAaK,GAE9CD,OAAQ,SAAUJ,UACPC,aAAa,gBAAD,OAAiBD,MCR5C,+O,oMCIMM,EAAOC,aAAe,kBAAM,iCAC5BC,EAAUD,aAAe,kBAAM,iCAC/BE,EAAeF,aAAe,kBAAM,uDACpCG,EAAOH,aAAe,kBAAM,iCAC5BI,EAAQJ,aAAe,kBAAM,uDAEpB,aACX,OACI,kBAAC,IAAD,KACI,yBAAK9E,UAAU,WACX,yBAAKA,UAAU,QACX,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAOmF,OAAK,EAACC,KAAK,IAAI1D,UAAWmD,IACjC,kBAAC,IAAD,CAAOM,OAAK,EAACC,KAAK,WAAW1D,UAAWqD,IACxC,kBAAC,IAAD,CAAOI,OAAK,EAACC,KAAK,iBAAiB1D,UAAWsD,IAC9C,kBAAC,IAAD,CAAOG,OAAK,EAACC,KAAK,QAAQ1D,UAAWuD,IACrC,kBAAC,IAAD,CAAOE,OAAK,EAACC,KAAK,SAAS1D,UAAWwD,MAG9C,yBAAKlF,UAAU,UACX,yBAAKA,UAAU,WACX,kBAAC,IAAD,CAAMqF,GAAG,KAAT,gBACA,4BACA,kBAAC,IAAD,CAAMA,GAAG,YAAT,4BACA,4BACA,kBAAC,IAAD,CAAMA,GAAG,kBAAT,kCACA,4BACA,kBAAC,IAAD,CAAMA,GAAG,QAAT,2BCmBTC,MA5Cf,WAAgB,IAAD,EACeC,mBAAS,CAC/BhB,QAAS,KAFF,mBACJ9C,EADI,KACGI,EADH,KAKLpC,EAAc,SAAA+F,GAChB3D,EAASjC,OAAOC,OAAO,GAAI4B,EAAO+D,KA+BtC,OA5BAC,qBAAW,WAAM,4CAUb,8BAAAC,EAAA,sEAKgBjF,OAAOC,MAAMiF,cAL7B,yDAMgBlF,OAAOC,MAAMiF,cAN7B,iCAISpB,EAJT,EAISA,QAKW,QATpB,EAIkBqB,SAMVnG,EAAY,CAAC8E,YAEbsB,YAAM,sDAAe,KAZ7B,6CAVa,0DAyBbC,KACD,IAGC,kBAAC,IAAcC,SAAf,CAAwB5F,MAAK,eAAOsB,EAAP,CAAchC,iBACvC,kBAACuG,EAAD,SCxCa,WACrB,IAAMC,EAAOjF,SAASkF,qBAAqB,QAAQ,GAC7CC,EAAS,WACXF,EAAKpC,MAAMuC,SAAWC,KAAKC,IAAItF,SAAS+C,KAAKwC,YAAc,MAAO,MAAQ,MAE9E9F,OAAO+F,iBAAiB,SAAUL,GAAQ,GAC1CA,IAEJM,GACAvF,IAASwF,OAAO,kBAAC,EAAD,MAAS1F,SAASC,eAAe,W","file":"static/js/main.ed072398.chunk.js","sourcesContent":["import React, { forwardRef } from \"react\";\nconst GlobalContext = React.createContext(null);\nconst connect = formatter => {\n  return Component => {\n    return forwardRef((props, ref) => (\n      <GlobalContext.Consumer>\n        {({ updateStore, ...rest }) => {\n          let store = Object.assign({}, rest);\n          if (typeof formatter === \"function\") {\n            store = formatter(store);\n          }\n          return (\n            <Component\n              {...props}\n              {...store}\n              updateStore={updateStore}\n              ref={ref}\n            />\n          );\n        }}\n      </GlobalContext.Consumer>\n    ));\n  };\n};\n\nexport { GlobalContext, connect };\n","import React from \"react\";\nimport './style.scss';\n\nexport default function Card ({children, className = ''}) {\n  return (\n      <div className={`c-card ${className}`}>\n        {children}\n        <i />\n      </div>\n  );\n}\n","import React from \"react\";\nimport './style.scss';\n\nexport default function Loading () {\n  return (\n      <div className={`c-loading`}>\n        Loading...\n      </div>\n  );\n}\n","import React from \"react\";\n// import './style.scss';\n\nimport {elementToPageTop, toast} from \"../../utils\";\n\n// let instances = {};\n// let lastActive;\n\n// document.body.addEventListener('click', function (e) {\n//     let target = e.target;\n//     if (lastActive && instances[lastActive.id] && !instances[target.id]) {\n//         window.demos.hideKeyboard();\n//     }\n//     lastActive = target;\n// });\n\nexport default function Input (props) {\n    const {value = '', placeholder = '', onClick, onChange, id, ...rest} = props;\n    // instances[id] = 1;\n\n    // function scroll(h, t) {\n    //     let offset = document.querySelector('.footer').offsetHeight;\n    //     let gap = 2;\n    //     let innerH = window.innerHeight;\n    //     document.querySelector('.main').scrollTo({top: t + h + offset + gap - innerH });\n    // }\n\n    function handleFocus(e) {\n        onClick && onClick(e);\n        window.demos.showKeyboard({\n            value: value,\n            placeholder: placeholder,\n            multiple: true\n        }).then(function (data){\n            onChange(data)\n        })\n\n        // let h = e.target.offsetHeight;\n        // let t = elementToPageTop(e.target);\n        //\n        // setTimeout(function () {\n        //     scroll(h, t);\n        // }, 400);\n    }\n\n    return (\n        <input\n            id={id}\n            value={value}\n            placeholder={placeholder}\n            onClick={handleFocus}\n            onChange={onChange}\n            {...rest}\n        />\n    );\n}\n","import React from \"react\";\nimport ReactDOM from 'react-dom';\nimport './style.scss';\n\n// let domNode = document.body;\nlet domNode = document.getElementById('root');\n\nexport default function Loading () {\n\n    return ReactDOM.createPortal(\n        <div className={`c-mask-loading`}>\n            <div className='c-mask-loading-card'>\n                <div className='c-mask-loading-spin' />\n            </div>\n        </div>,\n        domNode\n    );\n\n}\n","import React from \"react\";\nimport './style.scss';\n\nexport default function Modal ({children, className = '', visible, onOk}) {\n    const handleOk = () => {\n        onOk && onOk();\n    };\n\n    return visible ? (\n        <div className='c-modal-mask'>\n            <div className='c-modal-content'>\n                <div className='c-modal-body'>\n                    {children}\n                </div>\n                <div className='c-modal-footer' onClick={handleOk}>确 定</div>\n            </div>\n        </div>\n    ) : null\n}\n","export { GlobalContext, connect } from \"./GlobalContext\";\nexport {default as Card} from \"./Card\";\nexport {default as Loading} from \"./Loading\";\nexport {default as Input} from \"./Input\";\nexport {default as MaskLoading} from \"./MaskLoading\";\nexport {default as Modal} from \"./Modal\";\n","function elementToPageTop(el) {\n    return el.offsetParent ? elementToPageTop(el.offsetParent) + el.offsetTop : el.offsetTop\n}\n\nexport default elementToPageTop\n","import React from \"react\";\n\nexport default importComponent => {\n    class AsyncComponent extends React.Component {\n        constructor(props) {\n            super(props);\n\n            this.state = {\n                component: null\n            };\n        }\n\n        async componentDidMount() {\n            const { default: component } = await importComponent();\n\n            this.setState({\n                component: component\n            });\n        }\n\n        render() {\n            const C = this.state.component;\n\n            return C ? < C {...this.props }\n            /> : null;\n        }\n    }\n\n    return AsyncComponent;\n};","export default {\n    imgSrc: `${process.env.PUBLIC_URL}/images`\n};\n","function isObject(obj) {\n    if (obj === 0) return false;\n    return (\n        obj &&\n        obj.constructor &&\n        obj.constructor.toString().match(/function\\s*([^(]*)/)[1] === \"Object\"\n    );\n}\n\n/**\n *\n * @param {Object} params\n */\nfunction formatQuery(params) {\n    if (!isObject(params)) return \"\";\n\n    let query = \"\";\n    for (const key in params) {\n        query += `${key}=${params[key]}&`;\n    }\n    return query.slice(0, -1);\n}\n\n/**\n * @des 获取query参数\n */\n\nfunction getQuery(key) {\n    let query = window.location.search.slice(1);\n    query = query.split(\"&\");\n\n    if (query.length === 0) return null;\n    const queryObjs = {};\n\n    query.forEach(item => {\n        const [key, value] = item.split(\"=\");\n        queryObjs[key] = value;\n    });\n\n    if (!key) return queryObjs;\n    return queryObjs[key] || null;\n}\n\nexport default { formatQuery, getQuery };\n","import axios from 'axios'\n// import {getAuth} from \"./auth\";\n// import {message} from \"antd\";\n// import history from \"../history\";\nconst instance = axios.create({\n  // baseURL: 'https://dapp.doschain.org/cracy/',\n  // baseURL: process.env.NODE_ENV === 'production' ? 'https://dapp.doschain.org/cracy' : '/cracy',\n  baseURL: '/cracy',\n  timeout: 10000,\n});\n\n// 拦截器\n// instance.interceptors.response.use((response) => {\n//   if (response.data && response.data.errCode === \"1\") {\n//     const msg = response.data.errMsg;\n//     msg && message.error(msg);\n//     history.push('/login');\n//   }\n//   return response\n// }, (error) => {\n//   return Promise.reject(error)\n// });\n//\n// instance.interceptors.request.use((config) => {\n//   if (config.data && config.method === 'post') {\n//     config.headers['Content-Type'] = 'application/x-www-form-urlencoded';\n//     let ret = '';\n//     for (let it in config.data) {\n//       ret += encodeURIComponent(it) + '=' + encodeURIComponent(config.data[it]) + '&'\n//     }\n//     config.data = ret.substring(0, ret.length - 1);\n//   }\n//\n//   const token = getAuth();\n//   if (token) {\n//     if (config.method === 'get') {\n//       config.params = Object.assign(config.params || {}, {token});\n//     } else if (config.method === 'post'){\n//       config.data = `${config.data ? `${config.data}&` : ''}token=${token}`\n//     }\n//   }\n//\n//   return config\n// }, (error) => {\n//   return Promise.reject(error)\n// });\n\nexport default instance\n","export default function (msg, duration){\n  duration = isNaN(duration) ? 3000 : duration;\n  const m = document.createElement('div');\n  m.innerHTML = msg;\n  m.style.cssText=\"max-width:80%;min-width: 80px;padding: 10px 14px;word-break: break-all;line-height:1.5;color: rgb(255, 255, 255);text-align: center;border-radius: 4px;position: fixed;top: 50%;left: 50%;transform: translate(-50%, -50%);z-index: 999999;background: rgba(0, 0, 0,.7);font-size: 16px;\";\n  document.body.appendChild(m);\n  setTimeout(function() {\n    const d = 0.5;\n    m.style.webkitTransition = '-webkit-transform ' + d + 's ease-in, opacity ' + d + 's ease-in';\n    m.style.opacity = '0';\n    setTimeout(function() { document.body.removeChild(m) }, d * 1000);\n  }, duration);\n};\n","export default {\n    get: function (address) {\n        return localStorage[`cracy_txid_${address}`] || '';\n    },\n    set: function (address, txid) {\n        localStorage[`cracy_txid_${address}`] = txid;\n    },\n    remove: function (address) {\n        delete localStorage[`cracy_txid_${address}`];\n    }\n}\n","export default {\n    get: function (address) {\n        return localStorage[`cracy_invite_${address}`] || '';\n    },\n    set: function (address, invite) {\n        localStorage[`cracy_invite_${address}`] = invite;\n    },\n    remove: function (address) {\n        delete localStorage[`cracy_invite_${address}`];\n    }\n}\n","export { default as className } from \"./className\";\nexport { default as elementToPageTop } from \"./elementToPageTop\";\nexport { default as addZero } from \"./addZero\";\nexport { default as asyncComponent } from \"./asyncComponent\";\nexport { default as basicURL } from \"./basicURL\";\nexport { default as parseQuery } from \"./parseQuery\";\nexport { default as axios } from \"./axios\";\nexport { default as toast } from \"./toast\";\nexport { default as cracyTxidCache } from \"./cracyTxidCache\";\nexport { default as cracyInviteAddressCache } from \"./cracyInviteAddressCache\";\n","import React from \"react\";\nimport { HashRouter as Router, Route, Switch, Link } from \"react-router-dom\";\nimport { asyncComponent } from \"./utils\";\n\nconst Home = asyncComponent(() => import(\"./pages/Home\"));\nconst Records = asyncComponent(() => import(\"./pages/Records\"));\nconst ReferralCode = asyncComponent(() => import(\"./pages/ReferralCode\"));\nconst Pool = asyncComponent(() => import(\"./pages/Pool\"));\nconst Share = asyncComponent(() => import(\"./pages/Share\"));\n\nexport default function () {\n    return (\n        <Router>\n            <div className='wrapper'>\n                <div className='main'>\n                    <Switch>\n                        <Route exact path=\"/\" component={Home} />\n                        <Route exact path=\"/records\" component={Records} />\n                        <Route exact path=\"/referral-code\" component={ReferralCode} />\n                        <Route exact path=\"/pool\" component={Pool} />\n                        <Route exact path=\"/share\" component={Share} />\n                    </Switch>\n                </div>\n                <div className='footer'>\n                    <nav className='nav-bar'>\n                        <Link to='/'>首页</Link>\n                        <i />\n                        <Link to='/records'>收益记录</Link>\n                        <i />\n                        <Link to='/referral-code'>我的推广码</Link>\n                        <i />\n                        <Link to='pool'>资金池</Link>\n                    </nav>\n                </div>\n            </div>\n        </Router>\n    )\n};\n","import React, { useState, useEffect } from \"react\";\nimport { GlobalContext } from \"./components\";\nimport Router from \"./Router\";\nimport \"./css/global.scss\";\nimport {toast} from \"./utils\"\n\nfunction App() {\n    const [state, setState] = useState({\n        address: '', // 账户地址\n    });\n\n    const updateStore = newState => {\n        setState(Object.assign({}, state, newState));\n    };\n\n    useEffect( () => {\n        const addr = function(){\n            return new Promise(function (resolve) {\n                setTimeout(function () {\n                    // resolve({address: 'TcS8a787PfU8b754FeqWHbQFSykGUDpY4Uu', currency: 'DOS'})\n                    resolve({address: 'TcSYiQJrBgSSaYfdDtsVrDqmSHpuVcVnkBN', currency: 'DOS'})\n                    // resolve({address: 'TcG7WxmzDtuorEk3w3hUETBoAGahVftop8n'})\n                }, 100)\n            })\n        };\n        async function getAddress () {\n            // let {address} = await window.demos.getIdentity();\n            // let {address} = await addr();\n            // let address = 'TcASfmyoFiNobNaCHeiPMkWgGmovoxk1sqk';\n            let {address, currency} = process.env.NODE_ENV === 'production'\n                ? await window.demos.getIdentity()\n                : await window.demos.getIdentity();\n                // : await addr();\n\n            if(currency === 'DOS') {\n                updateStore({address})\n            } else {\n                toast('请切换到DOS钱包再试', 60000)\n            }\n        }\n        getAddress();\n    }, []);\n\n    return (\n        <GlobalContext.Provider value={{ ...state, updateStore }}>\n            <Router />\n        </GlobalContext.Provider>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/global.scss';\nimport App from './App';\n\nconst initHtmlFontSize = () => {\n    const html = document.getElementsByTagName('html')[0];\n    const resize = () => {\n        html.style.fontSize = Math.min(document.body.clientWidth / 11.25, 66.6) + 'px';\n    };\n    window.addEventListener('resize', resize, false);\n    resize();\n};\ninitHtmlFontSize();\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}