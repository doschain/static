{"version":3,"sources":["pages/Records/index.js","service/index.js"],"names":["connect","address","useState","list","setList","loading","setLoading","useEffect","getGains","then","data","ret","className","map","index","name","type","createtime","amount","key","time","t","Date","month","getMonth","date","getDate","hours","getHours","minutes","getMinutes","formatTime","getBalance","axios","get","getPrice","post","openUpCert","addr","rawtx","page","limit","getFundsPool"],"mappings":"2JA+DeA,yBA1Df,YAA6B,IAAXC,EAAU,EAAVA,QAAU,EACAC,mBAAS,IADT,mBACjBC,EADiB,KACXC,EADW,OAEMF,oBAAS,GAFf,mBAEjBG,EAFiB,KAERC,EAFQ,KA6BxB,OAzBAC,qBAAU,WACDN,IACLK,GAAW,GACXE,YAAS,CAACP,YAAUQ,MAAK,YAAa,IAAXC,EAAU,EAAVA,KACnBA,EAAKC,KACLP,EAAQM,EAAKA,KAAKP,MAEtBG,GAAW,MACZ,WACCA,GAAW,SAGhB,CAACL,IAcA,yBAAKW,UAAU,aACVP,GAAW,kBAAC,IAAD,MACXF,EAAKU,KAAI,WAA6BC,GAAW,IAC1CC,EADIC,EAAqC,EAArCA,KAAMC,EAA+B,EAA/BA,WAAYC,EAAmB,EAAnBA,OAE1B,OAAQF,GACJ,KAAK,EACDD,EAAO,2BACP,MACJ,KAAK,EACDA,EAAO,2BACP,MACJ,QACIA,EAAI,eAAWC,GAEvB,OACI,yBAAKG,IAAKL,EAAOF,UAAU,aACvB,6BACI,2BAAIG,GACJ,2BA9BxB,SAAqBK,GACjB,IAAMC,EAAI,IAAIC,KAAU,IAALF,GACbG,EAAQF,EAAEG,WAAa,EACvBC,EAAOJ,EAAEK,UACTC,EAAQN,EAAEO,WACVC,EAAUR,EAAES,aAElB,MAAM,GAAN,OAAUP,EAAV,iBAAmBE,EAAnB,kBAA4BE,EAA5B,YAAqCE,GAuBbE,CAAWd,KAEnB,iCAAOC,EAAO,IAAd,gB,gCCvDxB,qLAGac,EAAa,SAAC/B,GACvB,OAAOgC,IAAMC,IAAN,oBAAuBjC,KAIrBkC,EAAW,SAAClC,GACrB,OAAOgC,IAAMG,KAAN,oBAAwBnC,EAAxB,aAA4C,KAI1CoC,EAAa,SAAC,GAA4B,IAA3BpC,EAA0B,EAA1BA,QAASqC,EAAiB,EAAjBA,KAAMC,EAAW,EAAXA,MACvC,OAAON,IAAMG,KAAN,oBAAwBnC,EAAxB,aAA4C,CAACqC,OAAMC,WAIjD/B,EAAW,SAAC,GAA0C,IAAzCP,EAAwC,EAAxCA,QAAwC,IAA/BuC,YAA+B,MAAxB,EAAwB,MAArBC,aAAqB,MAAb,IAAa,EAC9D,OAAOR,IAAMC,IAAN,oBAAuBjC,EAAvB,uBAA6CuC,EAA7C,kBAA2DC,KAIzDC,EAAe,WACxB,OAAOT,IAAMC,IAAI,gB","file":"static/js/6.edb2db5e.chunk.js","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport './style.scss';\nimport {getGains} from \"../../service\";\nimport {connect, Loading} from \"../../components\";\n\nfunction Records({address}) {\n    const [list, setList] = useState([]);\n    const [loading, setLoading] = useState(false);\n\n    useEffect(() => {\n        if (!address) return;\n        setLoading(true);\n        getGains({address}).then(({data}) => {\n            if (data.ret) {\n                setList(data.data.list);\n            }\n            setLoading(false);\n        }, () => {\n            setLoading(false);\n        });\n\n    }, [address]);\n\n    function formatTime (time) {\n        const t = new Date(time*1000);\n        const month = t.getMonth() + 1;\n        const date = t.getDate();\n        const hours = t.getHours();\n        const minutes = t.getMinutes();\n\n        return `${month}月${date}日 ${hours}:${minutes}`;\n\n    }\n\n    return (\n        <div className='p-records'>\n            {loading && <Loading /> }\n            {list.map(({type, createtime, amount}, index) => {\n                let name;\n                switch (type) {\n                    case 0:\n                        name = '民主证书';\n                        break;\n                    case 1:\n                        name = '创世兑换';\n                        break;\n                    default:\n                        name = `type ${type}`;\n                }\n                return (\n                    <div key={index} className='list-item'>\n                        <div>\n                            <p>{name}</p>\n                            <p>{formatTime(createtime)}</p>\n                        </div>\n                        <div>+{amount/1e8}BTC</div>\n                    </div>\n                )\n            })}\n        </div>\n    )\n}\n\nexport default connect()(Records);\n","import {axios} from '../utils'\n\n/** 获取余额 **/\nexport const getBalance = (address) => {\n    return axios.get(`/api/addr/${address}`);\n};\n\n/** 获取价格 **/\nexport const getPrice = (address) => {\n    return axios.post(`/api/addr/${address}/opencert`, {});\n};\n\n/** 开通证书 **/\nexport const openUpCert = ({address, addr, rawtx}) => {\n    return axios.post(`/api/addr/${address}/opencert`, {addr, rawtx});\n};\n\n/** 收益记录 **/\nexport const getGains = ({address, page = 1, limit = 1000000}) => {\n    return axios.get(`/api/addr/${address}/gains?page=${page}&limit=${limit}`);\n};\n\n/** 基金池 **/\nexport const getFundsPool = () => {\n    return axios.get('/api/funds');\n};\n"],"sourceRoot":""}