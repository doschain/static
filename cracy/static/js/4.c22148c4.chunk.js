(this.webpackJsonpcracy=this.webpackJsonpcracy||[]).push([[4],{114:function(e,t,a){"use strict";a.r(t);a(9),a(13);var n=a(12),c=a(0),r=a.n(c),s=(a(84),a(6)),i=a(76),o=a(19),l=a(85),u=0;t.default=Object(o.g)()((function(e){var t=e.address,a=s.f.getQuery("invite")||"",d=Object(c.useState)(0),b=Object(n.a)(d,2),m=b[0],p=b[1],v=Object(c.useState)(""),f=Object(n.a)(v,2),g=f[0],j=f[1],O=Object(c.useState)(a),E=Object(n.a)(O,2),h=E[0],N=E[1],w=Object(c.useState)(0),y=Object(n.a)(w,2),S=y[0],C=y[1],x=Object(c.useState)(0),k=Object(n.a)(x,2),T=k[0],B=k[1],J=Object(c.useState)(!1),_=Object(n.a)(J,2),Q=_[0],R=_[1],q=Object(c.useState)(""),F=Object(n.a)(q,2),M=F[0],P=F[1],$=Object(c.useState)(-1),z=Object(n.a)($,2),A=z[0],D=z[1];function G(e){Object(i.a)(e||t).then((function(a){var n=a.data;if(n.ret){var c=n.data,r=c.balance,i=c.btclight,o=c.code,l=c.time,u=c.status;e?1===u?window.demos.contract("pay",g,[{type:"uint256",value:S},{type:"string",value:"[2]"}]).then((function(e){H(e),s.e.set(t,e),s.d.set(t,h)}),(function(e){Object(s.g)(JSON.stringify(e),3e3)})):Object(s.g)("\u9080\u8bf7\u5730\u5740\u672a\u5f00\u901a"):(p(r),j(i),P(o),l&&D(void 0===u?1:u))}else e&&Object(s.g)("\u9080\u8bf7\u5730\u5740\u672a\u5f00\u901a")}))}function H(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;function n(){0===u?(H(e,a),u+=1):Object(s.g)("\u5f00\u901a\u5931\u8d25\uff0c\u8bf7\u53cd\u9988\u6216\u7a0d\u540e\u518d\u8bd5",5e3)}R(!0),Object(i.e)({address:t,addr:a,rawtx:e}).then((function(e){var a=e.data;R(!1),s.e.remove(t),s.d.remove(t),a.ret?(Object(s.g)("\u5f00\u901a\u6210\u529f"),D(0),G()):Object(s.g)(a.data)}),(function(e){R(!1),n()}))}function I(e){N("string"===typeof e?e:e.target.value.trim())}function K(){window.demos.scanQRCode().then((function(e){var t=e;e.includes("invite=")&&(t=e.match(/invite=(\w+)/)[1]),N(t)}))}function L(){window.demos.openFundManager()}return Object(c.useEffect)((function(){if(t){var e=s.e.get(t),a=s.d.get(t);e&&a&&H(e,a),G(),Object(i.d)(t).then((function(e){var t=e.data;t.ret&&(C(t.data.value),B(t.data.btcusdt))}))}}),[t]),r.a.createElement("div",{className:"p-home"},r.a.createElement("img",{src:"".concat(s.c.imgSrc,"/icon_btc.png"),alt:"btc",className:"coin-icon"}),r.a.createElement("p",{className:"balance"},"BTC\u4f59\u989d:",r.a.createElement("span",null,m/1e8)),r.a.createElement("div",{className:"btns"},r.a.createElement("button",{className:"c-btn",onClick:L},"\u5145\u503c"),r.a.createElement("button",{className:"c-btn",onClick:L},"\u63d0\u73b0")),r.a.createElement("p",{className:"balance"},"BTC\u4ef7\u683c:",r.a.createElement("span",null,"$ ",T)),r.a.createElement("p",{className:"price"},"\u9700\u652f\u4ed8:",r.a.createElement("span",null,S/1e8," ",r.a.createElement("i",null,"BTC"))),r.a.createElement("p",{className:"notice"},"\u6ce8\u610f:BTC\u5145\u503c\u6709\u77ff\u5de5\u8d39\u7528"),-1!==A?r.a.createElement(o.a,{className:"invite"},"\u63a8\u8350\u5730\u5740: ",M||h||"\u7a7a"):a?r.a.createElement(o.a,{className:"invite"},"\u63a8\u8350\u5730\u5740: ",a):r.a.createElement("div",{className:"input"},r.a.createElement("div",{className:"input-wrapper"},r.a.createElement(o.c,{type:"text",placeholder:"\u63a8\u8350\u5730\u5740",onChange:I,value:h,id:"p-home-input"})),r.a.createElement("img",{src:"".concat(s.c.imgSrc,"/icon_scan.png"),alt:"scan",onClick:K})),Q&&r.a.createElement(o.e,null),r.a.createElement("button",{className:"c-btn",onClick:function(){-1===A&&(S?m>=S?h?t.substring(0,2)===(h+"").substring(0,2)?G(h):Object(s.g)("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u9080\u8bf7\u7801"):Object(s.g)("\u8bf7\u8f93\u5165\u9080\u8bf7\u7801"):Object(s.g)("\u4f59\u989d\u4e0d\u8db3"):Object(s.g)("\u6b63\u5728\u83b7\u53d6\u8bc1\u4e66\u4ef7\u683c\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002"))},disabled:Q},-1===A?Q?"loading":"\u5f00\u901a":1===A?"\u5df2\u5f00\u901a":"\u5904\u7406\u4e2d"),r.a.createElement("div",{className:"package-json"},"version: ",l.version))}))},76:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"d",(function(){return r})),a.d(t,"e",(function(){return s})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return o}));var n=a(6),c=function(e){return n.b.get("/api/addr/".concat(e))},r=function(e){return n.b.post("/api/addr/".concat(e,"/opencert"),{})},s=function(e){var t=e.address,a=e.addr,c=e.rawtx;return n.b.post("/api/addr/".concat(t,"/opencert"),{addr:a,rawtx:c})},i=function(e){var t=e.address,a=e.page,c=void 0===a?1:a,r=e.limit,s=void 0===r?1e6:r;return n.b.get("/api/addr/".concat(t,"/gains?page=").concat(c,"&limit=").concat(s))},o=function(){return n.b.get("/api/funds")}},84:function(e,t,a){},85:function(e){e.exports=JSON.parse('{"name":"cracy","version":"1.0.11","private":true,"dependencies":{"@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","axios":"^0.19.2","node-sass":"^4.13.1","qrcode":"^1.4.4","react":"^16.12.0","react-dom":"^16.12.0","react-router-dom":"^5.1.2","react-scripts":"3.3.1","serve":"^11.3.0"},"scripts":{"start":"PORT=80 react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","serve":"serve build"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"homepage":"/cracy"}')}}]);
//# sourceMappingURL=4.c22148c4.chunk.js.map